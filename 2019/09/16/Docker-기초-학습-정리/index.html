
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Kevin의 블로그">
    <title>Docker 기초 학습 정리 - Kevin의 블로그</title>
    <meta name="author" content="Kevin">
    
    
        <link rel="icon" href="http://usehun0625.github.io/assets/images/beer_favaicon.png">
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kevin","sameAs":["https://github.com/usehun0625/","mailto:usehun0625@gmail.com"],"image":"beer.jpg"},"articleBody":"\nDocker 시작하기을 따라하며 학습한 내용을 정리한다.\n\n\n학습한 내용Docker 시작하기는 6개의 part로 나뉘어져 있으며 다음과 같다. 이 중 part 3까지만 진행한다.\n\n오리엔테이션\n컨테이너\n서비스\n스웜\n스택\n앱 배포\n\n\n\n스웜의 경우 쿠버네티스를 사용하는 트렌드 비춰 학습에서 제외한다.\n스택, 6. 앱 배포의 경우 스웜이 초기화 되야만 동작하기 때문에 학습에서 제외한다.\n\n\n1. 오리엔테이션개념적인 내용은 Docker 시작하기를 참고하면 된다.아래에는 CLI로 실습한 내용만 남긴다.\n12# Docker의 버전 확인$ docker --version\n\n12# Docker 설치에 대한 자세한 정보 확인$ docker info\n\n12# hello world 실행$ docker run hello-world\n\n12# 컨테이너 확인$ docker container ls --all\n\n\n2. 컨테이너Docker 이미지 생성, 컨테이너 실행 튜토리얼 진행컨테이너로 단순한 서버를 구축하는 튜토리얼을 진행한다.우선 Dockerfile을 만든다.\n1234567891011121314151617181920212223$ touch Dockerfile $ cat Dockerfile# Use an official Python runtime as a parent imageFROM python:2.7-slim # Set the working directory to /appWORKDIR /app # Copy the current directory contents into the container at /appCOPY . /app # Install any needed packages specified in requirements.txtRUN pip install --trusted-host pypi.python.org -r requirements.txt # Make port 80 available to the world outside this containerEXPOSE 80 # Define environment variableENV NAME World # Run app.py when the container launchesCMD [\"python\", \"app.py\"]\n\nPython 패키지 목록을 만든다.\n123$ cat requirements.txtFlaskRedis\n\n소스코드 작성 app.py\n12345678910111213141516171819202122232425# app.pyfrom flask import Flaskfrom redis import Redis, RedisErrorimport osimport socket # Connect to Redisredis = Redis(host=\"redis\", db=0, socket_connect_timeout=2, socket_timeout=2) app = Flask(__name__) @app.route(\"/\")def hello():    try:        visits = redis.incr(\"counter\")    except RedisError:        visits = \"&lt;i&gt;cannot connect to Redis, counter disabled&lt;/i&gt;\"     html = \"&lt;h3&gt;Hello &#123;name&#125;!&lt;/h3&gt;\" \\           \"&lt;b&gt;Hostname:&lt;/b&gt; &#123;hostname&#125;&lt;br/&gt;\" \\           \"&lt;b&gt;Visits:&lt;/b&gt; &#123;visits&#125;\"    return html.format(name=os.getenv(\"NAME\", \"world\"), hostname=socket.gethostname(), visits=visits) if __name__ == \"__main__\":    app.run(host='0.0.0.0', port=80)\n\nDockerfile로 이미지를 생성하기 위하여 Dockerfile, 패키지 목록, 소스코드를 확인\n12$ lsDockerfile       app.py           requirements.txt\n\nDockerfile로 friendlyhello라는 이름의 이미지 만들기\n1$ docker build --tag=friendlyhello .\n\n생성된 이미지 확인\n123$ docker image lsREPOSITORY            TAG                 IMAGE IDfriendlyhello         latest              326387cea398\n\n생성된 이미지로 컨테이너를 생성한다.\n1$ docker run -p 4000:80 friendlyhello\n\n컨테이너 80 포트를 Host OS 4000에 매핑한다.\n\n해당 url로 접속하여 컨테이너의 동작 확인 한다.\n12$ curl http://localhost:4000&lt;h3&gt;Hello World!&lt;/h3&gt;&lt;b&gt;Hostname:&lt;/b&gt; 86e9b8deb983&lt;br/&gt;&lt;b&gt;Visits:&lt;/b&gt; &lt;i&gt;cannot connect to Redis, counter disabled&lt;/i&gt;%\n\n백그라운드에서 실행하기 위하여 -d 옵션을 추가한다.\n1$ docker run -d -p 4000:80 friendlyhello\n\nDocker 이미지 공유Docker 허브에 로그인한다.\n1$ docker login\n\n이미지를 공유하기 위해서는 다음과 같이 이미지 태그를 설정해야한다.\n12### docker tag 이미지명 유저이름/레포명:태그명$ docker tag friendlyhello leyhon0625/tutorial:part1\n\n설정한 이미지를 업로드한다.\n1$ docker push leyhon0625/tutorial:part1\n\nDocker 허브에 로그인하여 해당 repo(예 : tutorial)는 미리 만들어야 한다.이미지를 업로드하면 다음과 같이 사용할 수 있다. 해당 이미지가 로컬에 존재하지 않는다면 자동으로 다운로드하고 로컬에 이미지를 생성해준다.\n1$ docker run -d -p 4000:80 leyhon0625/tutorial:part1\n\n\n3. 서비스서비스의 개념은 Docker 시작하기 - part3 서비스를 참고한다. 서비스는 하나의 이미지만 실행하고 이미지 실행 방식을 체계화한다.서비스의 개념에서 등장하는 것이 docker-compose.yml 파일이고 이는 도커의 행동방식을 정의하는 YAML 파일이다.\n다음과 같이 docker-compose.yml을 작성한다.\n1234567891011121314151617181920$ cat docker-compose.ymlversion: \"3\"services:  web:    # replace username/repo:tag with your name and image details    image: leyhon0625/tutorial:part1    deploy:      replicas: 5      resources:        limits:          cpus: \"0.1\"          memory: 50M      restart_policy:        condition: on-failure    ports:      - \"4000:80\"    networks:      - webnetnetworks:  webnet:\n\n위의 YAML 파일에 대한 설명은 Docker 시작하기 - part3 서비스를 참고한다.\n새로운 load-balanced app 실행배포 전에 Swarm을 초기화 한다.\n1$ docker swarm init\n\n이제 실행하는데 getstartedlab라는 이름의 스택으로 실행한다.\n1$ docker stack deploy -c docker-compose.yml getstartedlab\n\nDocker의 서비스 목록을 확인하면 getstartedlab 뒤에 web이 붙어 getstartedlab_web이라는 형태로 서비스가 존재하는 것을 확인할 수 있다.\n123$ docker service lsID                  NAME                MODE                REPLICAS            IMAGE                       PORTSr8ikpt4dypup        getstartedlab_web   replicated          5/5                 leyhon0625/tutorial:part1   *:4000-&gt;80/tcp\n\ngetstartedlab 스택의 서비스를 확인하면 다음과 같다.\n123$ docker stack services getstartedlabID                  NAME                MODE                REPLICAS            IMAGE                       PORTSr8ikpt4dypup        getstartedlab_web   replicated          5/5                 leyhon0625/tutorial:part1   *:4000-&gt;80/tcp\n\n다음과 같은 명령으로 특정 서비스내 task 목록을 확인할 수 있다.(아마도 컨테이너 단위를 의미하는 듯 싶다.)\n1234567$ docker service ps getstartedlab_webID                  NAME                  IMAGE                       NODE                DESIRED STATE       CURRENT STATE            ERROR               PORTSdk5k5bt68eoa        getstartedlab_web.1   leyhon0625/tutorial:part1   docker-desktop      Running             Running 25 minutes agonq0q77gcwo03        getstartedlab_web.2   leyhon0625/tutorial:part1   docker-desktop      Running             Running 25 minutes agohsd20wrbpkjx        getstartedlab_web.3   leyhon0625/tutorial:part1   docker-desktop      Running             Running 25 minutes agoqin17db37xvs        getstartedlab_web.4   leyhon0625/tutorial:part1   docker-desktop      Running             Running 25 minutes agos8u54k1ax8f6        getstartedlab_web.5   leyhon0625/tutorial:part1   docker-desktop      Running             Running 25 minutes ago\n\n다음과 같은 명령으로 특정 스택내 task 목록을 확인할 수 있다.\n1234567$ docker stack ps getstartedlabID                  NAME                  IMAGE                       NODE                DESIRED STATE       CURRENT STATE            ERROR               PORTSdk5k5bt68eoa        getstartedlab_web.1   leyhon0625/tutorial:part1   docker-desktop      Running             Running 58 minutes agonq0q77gcwo03        getstartedlab_web.2   leyhon0625/tutorial:part1   docker-desktop      Running             Running 58 minutes agohsd20wrbpkjx        getstartedlab_web.3   leyhon0625/tutorial:part1   docker-desktop      Running             Running 58 minutes agoqin17db37xvs        getstartedlab_web.4   leyhon0625/tutorial:part1   docker-desktop      Running             Running 58 minutes agos8u54k1ax8f6        getstartedlab_web.5   leyhon0625/tutorial:part1   docker-desktop      Running             Running 58 minutes ago\n\n앱 확장docker-compose.yml 파일을 다음과 같이 수정한다.\n1234567891011121314151617181920$ cat docker-compose.ymlversion: \"3\"services:  web:    # replace username/repo:tag with your name and image details    image: leyhon0625/tutorial:part1    deploy:      replicas: 10      resources:        limits:          cpus: \"0.1\"          memory: 50M      restart_policy:        condition: on-failure    ports:      - \"4000:80\"    networks:      - webnetnetworks:  webnet:\n\n이제 실행하는데 기존과 같은 getstartedlab라는 이름의 스택으로 실행한다.\n1$ docker stack deploy -c docker-compose.yml getstartedlab\n\n서비스를 확인하면 다음과 같이 업데이트 된 것을 확인할 수 있다. 새로운 레플리카가 생성된 것을 확인할 수 있다.\n123$ docker service lsID                  NAME                MODE                REPLICAS            IMAGE                       PORTSr8ikpt4dypup        getstartedlab_web   replicated          10/10               leyhon0625/tutorial:part1   *:4000-&gt;80/tcp\n\n123456789101112$ docker stack ps getstartedlabID                  NAME                   IMAGE                       NODE                DESIRED STATE       CURRENT STATE           ERROR               PORTSdk5k5bt68eoa        getstartedlab_web.1    leyhon0625/tutorial:part1   docker-desktop      Running             Running 2 hours agonq0q77gcwo03        getstartedlab_web.2    leyhon0625/tutorial:part1   docker-desktop      Running             Running 2 hours agohsd20wrbpkjx        getstartedlab_web.3    leyhon0625/tutorial:part1   docker-desktop      Running             Running 2 hours agoqin17db37xvs        getstartedlab_web.4    leyhon0625/tutorial:part1   docker-desktop      Running             Running 2 hours agos8u54k1ax8f6        getstartedlab_web.5    leyhon0625/tutorial:part1   docker-desktop      Running             Running 2 hours agosqn7aohfghfg        getstartedlab_web.6    leyhon0625/tutorial:part1   docker-desktop      Running             Running 3 minutes ago3wee43wtqo1q        getstartedlab_web.7    leyhon0625/tutorial:part1   docker-desktop      Running             Running 3 minutes ago0h6xfiw9a92s        getstartedlab_web.8    leyhon0625/tutorial:part1   docker-desktop      Running             Running 3 minutes agometnndctvyn4        getstartedlab_web.9    leyhon0625/tutorial:part1   docker-desktop      Running             Running 3 minutes agorn22s1618j0g        getstartedlab_web.10   leyhon0625/tutorial:part1   docker-desktop      Running             Running 3 minutes ago\n\n스택의 종료는 다음과 같이 한다. \n1$ docker stack rm getstartedlab\n\nswarm의 종료는 다음과 같이 한다.\n1$ docker swarm leave --force\n\n명령어 모음파트별로 진행하며 사용한 명령어만 간략하게 살펴보기 위하여 정리하였다.\npart1 오리엔테이션\n12345678910111213141516171819## List Docker CLI commands$ docker$ docker container --help ## Display Docker version and info$ docker --version$ docker version$ docker info ## Execute Docker image$ docker run hello-world ## List Docker images$ docker image ls ## List Docker containers (running, all, all in quiet mode)$ docker container ls$ docker container ls --all$ docker container ls -aq\n\npart2 컨테이너\n12345678910111213141516$ docker build -t friendlyhello .  # Create image using this directory's Dockerfile$ docker run -p 4000:80 friendlyhello  # Run \"friendlyhello\" mapping port 4000 to 80$ docker run -d -p 4000:80 friendlyhello         # Same thing, but in detached mode$ docker container ls                                # List all running containers$ docker container ls -a             # List all containers, even those not running$ docker container stop &lt;hash&gt;           # Gracefully stop the specified container$ docker container kill &lt;hash&gt;         # Force shutdown of the specified container$ docker container rm &lt;hash&gt;        # Remove specified container from this machine$ docker container rm $(docker container ls -a -q)         # Remove all containers$ docker image ls -a                             # List all images on this machine$ docker image rm &lt;image id&gt;            # Remove specified image from this machine$ docker image rm $(docker image ls -a -q)   # Remove all images from this machine$ docker login             # Log in this CLI session using your Docker credentials$ docker tag &lt;image&gt; username/repository:tag  # Tag &lt;image&gt; for upload to registry$ docker push username/repository:tag            # Upload tagged image to registry$ docker run username/repository:tag                   # Run image from a registry\n\npart3 서비스\n12345678$ docker stack ls                                            # List stacks or apps$ docker stack deploy -c &lt;composefile&gt; &lt;appname&gt;  # Run the specified Compose file$ docker service ls                 # List running services associated with an app$ docker service ps &lt;service&gt;                  # List tasks associated with an app$ docker inspect &lt;task or container&gt;                   # Inspect task or container$ docker container ls -q                                      # List container IDs$ docker stack rm &lt;appname&gt;                             # Tear down an application$ docker swarm leave --force      # Take down a single node swarm from the manager\n","dateCreated":"2019-09-16T06:48:43+09:00","dateModified":"2020-02-15T14:07:14+09:00","datePublished":"2019-09-16T06:48:43+09:00","description":"\nDocker 시작하기을 따라하며 학습한 내용을 정리한다.","headline":"Docker 기초 학습 정리","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"http://usehun0625.github.io/2019/09/16/Docker-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/"},"publisher":{"@type":"Organization","name":"Kevin","sameAs":["https://github.com/usehun0625/","mailto:usehun0625@gmail.com"],"image":"beer.jpg","logo":{"@type":"ImageObject","url":"beer.jpg"}},"url":"http://usehun0625.github.io/2019/09/16/Docker-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/","keywords":"Docker"}</script>
    <meta name="description" content="Docker 시작하기을 따라하며 학습한 내용을 정리한다.">
<meta property="og:type" content="blog">
<meta property="og:title" content="Docker 기초 학습 정리">
<meta property="og:url" content="http://usehun0625.github.io/2019/09/16/Docker-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/index.html">
<meta property="og:site_name" content="Kevin의 블로그">
<meta property="og:description" content="Docker 시작하기을 따라하며 학습한 내용을 정리한다.">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2019-09-15T21:48:43.000Z">
<meta property="article:modified_time" content="2020-02-15T05:07:14.699Z">
<meta property="article:author" content="Kevin">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="http://usehun0625.github.io/assets/images/beer.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Kevin의 블로그
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/beer.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/beer.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Kevin</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Kevin, 이용훈<br>어릴 때부터 코딩에 흥미를 가지고 살아왔습니다. 새로운 기술도 열정적으로 받아들이며 더 좋은 개발을 위하여 학습하고 경험하고 노력하고 있습니다.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/"
                            title="홈"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">홈</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="카테고리"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="태그"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="/all-archives"
                            
                            title="아카이브"
                        >
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/usehun0625/" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:usehun0625@gmail.com" target="_blank" rel="noopener" title="Mail">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Docker 기초 학습 정리
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2019-09-16T06:48:43+09:00">
	
		    Sep 16, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%EA%B0%80%EC%83%81%ED%99%94-%EC%97%94%EC%A7%84/">가상화 엔진</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h1 id="table-of-contents">Table of Contents</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#학습한-내용"><span class="toc-text">학습한 내용</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-오리엔테이션"><span class="toc-text">1. 오리엔테이션</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-컨테이너"><span class="toc-text">2. 컨테이너</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-이미지-생성-컨테이너-실행-튜토리얼-진행"><span class="toc-text">Docker 이미지 생성, 컨테이너 실행 튜토리얼 진행</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker-이미지-공유"><span class="toc-text">Docker 이미지 공유</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-서비스"><span class="toc-text">3. 서비스</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#새로운-load-balanced-app-실행"><span class="toc-text">새로운 load-balanced app 실행</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#앱-확장"><span class="toc-text">앱 확장</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#명령어-모음"><span class="toc-text">명령어 모음</span></a></li></ol></li></ol>
<p><a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener">Docker 시작하기</a>을 따라하며 학습한 내용을 정리한다.</p>
<a id="more"></a>

<h1 id="학습한-내용"><a href="#학습한-내용" class="headerlink" title="학습한 내용"></a>학습한 내용</h1><p>Docker 시작하기는 6개의 part로 나뉘어져 있으며 다음과 같다. 이 중 part 3까지만 진행한다.</p>
<ol>
<li>오리엔테이션</li>
<li>컨테이너</li>
<li>서비스</li>
<li><del>스웜</del></li>
<li><del>스택</del></li>
<li><del>앱 배포</del></li>
</ol>
<blockquote>
<ol start="4">
<li>스웜의 경우 쿠버네티스를 사용하는 트렌드 비춰 학습에서 제외한다.</li>
<li>스택, 6. 앱 배포의 경우 스웜이 초기화 되야만 동작하기 때문에 학습에서 제외한다.</li>
</ol>
</blockquote>
<h2 id="1-오리엔테이션"><a href="#1-오리엔테이션" class="headerlink" title="1. 오리엔테이션"></a>1. 오리엔테이션</h2><p>개념적인 내용은 <a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener">Docker 시작하기</a>를 참고하면 된다.<br>아래에는 CLI로 실습한 내용만 남긴다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Docker의 버전 확인</span></span><br><span class="line">$ docker --version</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Docker 설치에 대한 자세한 정보 확인</span></span><br><span class="line">$ docker info</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hello world 실행</span></span><br><span class="line">$ docker run hello-world</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 컨테이너 확인</span></span><br><span class="line">$ docker container ls --all</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-컨테이너"><a href="#2-컨테이너" class="headerlink" title="2. 컨테이너"></a>2. 컨테이너</h2><h3 id="Docker-이미지-생성-컨테이너-실행-튜토리얼-진행"><a href="#Docker-이미지-생성-컨테이너-실행-튜토리얼-진행" class="headerlink" title="Docker 이미지 생성, 컨테이너 실행 튜토리얼 진행"></a>Docker 이미지 생성, 컨테이너 실행 튜토리얼 진행</h3><p>컨테이너로 단순한 서버를 구축하는 튜토리얼을 진행한다.<br>우선 Dockerfile을 만든다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ touch Dockerfile</span><br><span class="line"> </span><br><span class="line">$ cat Dockerfile</span><br><span class="line"><span class="comment"># Use an official Python runtime as a parent image</span></span><br><span class="line">FROM python:2.7-slim</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Set the working directory to /app</span></span><br><span class="line">WORKDIR /app</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Copy the current directory contents into the container at /app</span></span><br><span class="line">COPY . /app</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Install any needed packages specified in requirements.txt</span></span><br><span class="line">RUN pip install --trusted-host pypi.python.org -r requirements.txt</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Make port 80 available to the world outside this container</span></span><br><span class="line">EXPOSE 80</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Define environment variable</span></span><br><span class="line">ENV NAME World</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Run app.py when the container launches</span></span><br><span class="line">CMD [<span class="string">"python"</span>, <span class="string">"app.py"</span>]</span><br></pre></td></tr></table></figure>

<p>Python 패키지 목록을 만든다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat requirements.txt</span><br><span class="line">Flask</span><br><span class="line">Redis</span><br></pre></td></tr></table></figure>

<p>소스코드 작성 <em>app.py</em></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># app.py</span></span><br><span class="line">from flask import Flask</span><br><span class="line">from redis import Redis, RedisError</span><br><span class="line">import os</span><br><span class="line">import socket</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Connect to Redis</span></span><br><span class="line">redis = Redis(host=<span class="string">"redis"</span>, db=0, socket_connect_timeout=2, socket_timeout=2)</span><br><span class="line"> </span><br><span class="line">app = Flask(__name__)</span><br><span class="line"> </span><br><span class="line">@app.route(<span class="string">"/"</span>)</span><br><span class="line">def hello():</span><br><span class="line">    try:</span><br><span class="line">        visits = redis.incr(<span class="string">"counter"</span>)</span><br><span class="line">    except RedisError:</span><br><span class="line">        visits = <span class="string">"&lt;i&gt;cannot connect to Redis, counter disabled&lt;/i&gt;"</span></span><br><span class="line"> </span><br><span class="line">    html = <span class="string">"&lt;h3&gt;Hello &#123;name&#125;!&lt;/h3&gt;"</span> \</span><br><span class="line">           <span class="string">"&lt;b&gt;Hostname:&lt;/b&gt; &#123;hostname&#125;&lt;br/&gt;"</span> \</span><br><span class="line">           <span class="string">"&lt;b&gt;Visits:&lt;/b&gt; &#123;visits&#125;"</span></span><br><span class="line">    <span class="built_in">return</span> html.format(name=os.getenv(<span class="string">"NAME"</span>, <span class="string">"world"</span>), hostname=socket.gethostname(), visits=visits)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app.run(host=<span class="string">'0.0.0.0'</span>, port=80)</span><br></pre></td></tr></table></figure>

<p>Dockerfile로 이미지를 생성하기 위하여 Dockerfile, 패키지 목록, 소스코드를 확인</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls</span><br><span class="line">Dockerfile       app.py           requirements.txt</span><br></pre></td></tr></table></figure>

<p>Dockerfile로 friendlyhello라는 이름의 이미지 만들기</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker build --tag=friendlyhello .</span><br></pre></td></tr></table></figure>

<p>생성된 이미지 확인</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker image ls</span><br><span class="line">REPOSITORY            TAG                 IMAGE ID</span><br><span class="line">friendlyhello         latest              326387cea398</span><br></pre></td></tr></table></figure>

<p>생성된 이미지로 컨테이너를 생성한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -p 4000:80 friendlyhello</span><br></pre></td></tr></table></figure>
<blockquote>
<p>컨테이너 80 포트를 Host OS 4000에 매핑한다.</p>
</blockquote>
<p>해당 url로 접속하여 컨테이너의 동작 확인 한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl http://localhost:4000</span><br><span class="line">&lt;h3&gt;Hello World!&lt;/h3&gt;&lt;b&gt;Hostname:&lt;/b&gt; 86e9b8deb983&lt;br/&gt;&lt;b&gt;Visits:&lt;/b&gt; &lt;i&gt;cannot connect to Redis, counter disabled&lt;/i&gt;%</span><br></pre></td></tr></table></figure>

<p>백그라운드에서 실행하기 위하여 <em>-d</em> 옵션을 추가한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 4000:80 friendlyhello</span><br></pre></td></tr></table></figure>

<h3 id="Docker-이미지-공유"><a href="#Docker-이미지-공유" class="headerlink" title="Docker 이미지 공유"></a>Docker 이미지 공유</h3><p><a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker 허브</a>에 로그인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker login</span><br></pre></td></tr></table></figure>

<p>이미지를 공유하기 위해서는 다음과 같이 이미지 태그를 설정해야한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### docker tag 이미지명 유저이름/레포명:태그명</span></span><br><span class="line">$ docker tag friendlyhello leyhon0625/tutorial:part1</span><br></pre></td></tr></table></figure>

<p>설정한 이미지를 업로드한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker push leyhon0625/tutorial:part1</span><br></pre></td></tr></table></figure>

<p>Docker 허브에 로그인하여 해당 repo(예 : tutorial)는 미리 만들어야 한다.<br>이미지를 업로드하면 다음과 같이 사용할 수 있다. 해당 이미지가 로컬에 존재하지 않는다면 자동으로 다운로드하고 로컬에 이미지를 생성해준다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 4000:80 leyhon0625/tutorial:part1</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-서비스"><a href="#3-서비스" class="headerlink" title="3. 서비스"></a>3. 서비스</h2><p>서비스의 개념은 <a href="https://docs.docker.com/get-started/part3/" target="_blank" rel="noopener">Docker 시작하기 - part3 서비스</a>를 참고한다. 서비스는 하나의 이미지만 실행하고 이미지 실행 방식을 체계화한다.<br>서비스의 개념에서 등장하는 것이 docker-compose.yml 파일이고 이는 도커의 행동방식을 정의하는 YAML 파일이다.</p>
<p>다음과 같이 docker-compose.yml을 작성한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ cat docker-compose.yml</span><br><span class="line">version: <span class="string">"3"</span></span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    <span class="comment"># replace username/repo:tag with your name and image details</span></span><br><span class="line">    image: leyhon0625/tutorial:part1</span><br><span class="line">    deploy:</span><br><span class="line">      replicas: 5</span><br><span class="line">      resources:</span><br><span class="line">        limits:</span><br><span class="line">          cpus: <span class="string">"0.1"</span></span><br><span class="line">          memory: 50M</span><br><span class="line">      restart_policy:</span><br><span class="line">        condition: on-failure</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">"4000:80"</span></span><br><span class="line">    networks:</span><br><span class="line">      - webnet</span><br><span class="line">networks:</span><br><span class="line">  webnet:</span><br></pre></td></tr></table></figure>

<p>위의 YAML 파일에 대한 설명은 <a href="https://docs.docker.com/get-started/part3/" target="_blank" rel="noopener">Docker 시작하기 - part3 서비스</a>를 참고한다.</p>
<h3 id="새로운-load-balanced-app-실행"><a href="#새로운-load-balanced-app-실행" class="headerlink" title="새로운 load-balanced app 실행"></a>새로운 load-balanced app 실행</h3><p>배포 전에 Swarm을 초기화 한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker swarm init</span><br></pre></td></tr></table></figure>

<p>이제 실행하는데 getstartedlab라는 이름의 스택으로 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker stack deploy -c docker-compose.yml getstartedlab</span><br></pre></td></tr></table></figure>

<p>Docker의 서비스 목록을 확인하면 getstartedlab 뒤에 web이 붙어 getstartedlab_web이라는 형태로 서비스가 존재하는 것을 확인할 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker service ls</span><br><span class="line">ID                  NAME                MODE                REPLICAS            IMAGE                       PORTS</span><br><span class="line">r8ikpt4dypup        getstartedlab_web   replicated          5/5                 leyhon0625/tutorial:part1   *:4000-&gt;80/tcp</span><br></pre></td></tr></table></figure>

<p>getstartedlab 스택의 서비스를 확인하면 다음과 같다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker stack services getstartedlab</span><br><span class="line">ID                  NAME                MODE                REPLICAS            IMAGE                       PORTS</span><br><span class="line">r8ikpt4dypup        getstartedlab_web   replicated          5/5                 leyhon0625/tutorial:part1   *:4000-&gt;80/tcp</span><br></pre></td></tr></table></figure>

<p>다음과 같은 명령으로 특정 서비스내 task 목록을 확인할 수 있다.(아마도 컨테이너 단위를 의미하는 듯 싶다.)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ docker service ps getstartedlab_web</span><br><span class="line">ID                  NAME                  IMAGE                       NODE                DESIRED STATE       CURRENT STATE            ERROR               PORTS</span><br><span class="line">dk5k5bt68eoa        getstartedlab_web.1   leyhon0625/tutorial:part1   docker-desktop      Running             Running 25 minutes ago</span><br><span class="line">nq0q77gcwo03        getstartedlab_web.2   leyhon0625/tutorial:part1   docker-desktop      Running             Running 25 minutes ago</span><br><span class="line">hsd20wrbpkjx        getstartedlab_web.3   leyhon0625/tutorial:part1   docker-desktop      Running             Running 25 minutes ago</span><br><span class="line">qin17db37xvs        getstartedlab_web.4   leyhon0625/tutorial:part1   docker-desktop      Running             Running 25 minutes ago</span><br><span class="line">s8u54k1ax8f6        getstartedlab_web.5   leyhon0625/tutorial:part1   docker-desktop      Running             Running 25 minutes ago</span><br></pre></td></tr></table></figure>

<p>다음과 같은 명령으로 특정 스택내 task 목록을 확인할 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ docker stack ps getstartedlab</span><br><span class="line">ID                  NAME                  IMAGE                       NODE                DESIRED STATE       CURRENT STATE            ERROR               PORTS</span><br><span class="line">dk5k5bt68eoa        getstartedlab_web.1   leyhon0625/tutorial:part1   docker-desktop      Running             Running 58 minutes ago</span><br><span class="line">nq0q77gcwo03        getstartedlab_web.2   leyhon0625/tutorial:part1   docker-desktop      Running             Running 58 minutes ago</span><br><span class="line">hsd20wrbpkjx        getstartedlab_web.3   leyhon0625/tutorial:part1   docker-desktop      Running             Running 58 minutes ago</span><br><span class="line">qin17db37xvs        getstartedlab_web.4   leyhon0625/tutorial:part1   docker-desktop      Running             Running 58 minutes ago</span><br><span class="line">s8u54k1ax8f6        getstartedlab_web.5   leyhon0625/tutorial:part1   docker-desktop      Running             Running 58 minutes ago</span><br></pre></td></tr></table></figure>

<h3 id="앱-확장"><a href="#앱-확장" class="headerlink" title="앱 확장"></a>앱 확장</h3><p>docker-compose.yml 파일을 다음과 같이 수정한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ cat docker-compose.yml</span><br><span class="line">version: <span class="string">"3"</span></span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    <span class="comment"># replace username/repo:tag with your name and image details</span></span><br><span class="line">    image: leyhon0625/tutorial:part1</span><br><span class="line">    deploy:</span><br><span class="line">      replicas: 10</span><br><span class="line">      resources:</span><br><span class="line">        limits:</span><br><span class="line">          cpus: <span class="string">"0.1"</span></span><br><span class="line">          memory: 50M</span><br><span class="line">      restart_policy:</span><br><span class="line">        condition: on-failure</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">"4000:80"</span></span><br><span class="line">    networks:</span><br><span class="line">      - webnet</span><br><span class="line">networks:</span><br><span class="line">  webnet:</span><br></pre></td></tr></table></figure>

<p>이제 실행하는데 기존과 같은 getstartedlab라는 이름의 스택으로 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker stack deploy -c docker-compose.yml getstartedlab</span><br></pre></td></tr></table></figure>

<p>서비스를 확인하면 다음과 같이 업데이트 된 것을 확인할 수 있다. 새로운 레플리카가 생성된 것을 확인할 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker service ls</span><br><span class="line">ID                  NAME                MODE                REPLICAS            IMAGE                       PORTS</span><br><span class="line">r8ikpt4dypup        getstartedlab_web   replicated          10/10               leyhon0625/tutorial:part1   *:4000-&gt;80/tcp</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ docker stack ps getstartedlab</span><br><span class="line">ID                  NAME                   IMAGE                       NODE                DESIRED STATE       CURRENT STATE           ERROR               PORTS</span><br><span class="line">dk5k5bt68eoa        getstartedlab_web.1    leyhon0625/tutorial:part1   docker-desktop      Running             Running 2 hours ago</span><br><span class="line">nq0q77gcwo03        getstartedlab_web.2    leyhon0625/tutorial:part1   docker-desktop      Running             Running 2 hours ago</span><br><span class="line">hsd20wrbpkjx        getstartedlab_web.3    leyhon0625/tutorial:part1   docker-desktop      Running             Running 2 hours ago</span><br><span class="line">qin17db37xvs        getstartedlab_web.4    leyhon0625/tutorial:part1   docker-desktop      Running             Running 2 hours ago</span><br><span class="line">s8u54k1ax8f6        getstartedlab_web.5    leyhon0625/tutorial:part1   docker-desktop      Running             Running 2 hours ago</span><br><span class="line">sqn7aohfghfg        getstartedlab_web.6    leyhon0625/tutorial:part1   docker-desktop      Running             Running 3 minutes ago</span><br><span class="line">3wee43wtqo1q        getstartedlab_web.7    leyhon0625/tutorial:part1   docker-desktop      Running             Running 3 minutes ago</span><br><span class="line">0h6xfiw9a92s        getstartedlab_web.8    leyhon0625/tutorial:part1   docker-desktop      Running             Running 3 minutes ago</span><br><span class="line">metnndctvyn4        getstartedlab_web.9    leyhon0625/tutorial:part1   docker-desktop      Running             Running 3 minutes ago</span><br><span class="line">rn22s1618j0g        getstartedlab_web.10   leyhon0625/tutorial:part1   docker-desktop      Running             Running 3 minutes ago</span><br></pre></td></tr></table></figure>

<p>스택의 종료는 다음과 같이 한다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker stack rm getstartedlab</span><br></pre></td></tr></table></figure>

<p>swarm의 종료는 다음과 같이 한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker swarm leave --force</span><br></pre></td></tr></table></figure>

<h2 id="명령어-모음"><a href="#명령어-모음" class="headerlink" title="명령어 모음"></a>명령어 모음</h2><p>파트별로 진행하며 사용한 명령어만 간략하게 살펴보기 위하여 정리하였다.</p>
<p><strong>part1 오리엔테이션</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## List Docker CLI commands</span></span><br><span class="line">$ docker</span><br><span class="line">$ docker container --<span class="built_in">help</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">## Display Docker version and info</span></span><br><span class="line">$ docker --version</span><br><span class="line">$ docker version</span><br><span class="line">$ docker info</span><br><span class="line"> </span><br><span class="line"><span class="comment">## Execute Docker image</span></span><br><span class="line">$ docker run hello-world</span><br><span class="line"> </span><br><span class="line"><span class="comment">## List Docker images</span></span><br><span class="line">$ docker image ls</span><br><span class="line"> </span><br><span class="line"><span class="comment">## List Docker containers (running, all, all in quiet mode)</span></span><br><span class="line">$ docker container ls</span><br><span class="line">$ docker container ls --all</span><br><span class="line">$ docker container ls -aq</span><br></pre></td></tr></table></figure>

<p><strong>part2 컨테이너</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t friendlyhello .  <span class="comment"># Create image using this directory's Dockerfile</span></span><br><span class="line">$ docker run -p 4000:80 friendlyhello  <span class="comment"># Run "friendlyhello" mapping port 4000 to 80</span></span><br><span class="line">$ docker run -d -p 4000:80 friendlyhello         <span class="comment"># Same thing, but in detached mode</span></span><br><span class="line">$ docker container ls                                <span class="comment"># List all running containers</span></span><br><span class="line">$ docker container ls -a             <span class="comment"># List all containers, even those not running</span></span><br><span class="line">$ docker container stop &lt;<span class="built_in">hash</span>&gt;           <span class="comment"># Gracefully stop the specified container</span></span><br><span class="line">$ docker container <span class="built_in">kill</span> &lt;<span class="built_in">hash</span>&gt;         <span class="comment"># Force shutdown of the specified container</span></span><br><span class="line">$ docker container rm &lt;<span class="built_in">hash</span>&gt;        <span class="comment"># Remove specified container from this machine</span></span><br><span class="line">$ docker container rm $(docker container ls -a -q)         <span class="comment"># Remove all containers</span></span><br><span class="line">$ docker image ls -a                             <span class="comment"># List all images on this machine</span></span><br><span class="line">$ docker image rm &lt;image id&gt;            <span class="comment"># Remove specified image from this machine</span></span><br><span class="line">$ docker image rm $(docker image ls -a -q)   <span class="comment"># Remove all images from this machine</span></span><br><span class="line">$ docker login             <span class="comment"># Log in this CLI session using your Docker credentials</span></span><br><span class="line">$ docker tag &lt;image&gt; username/repository:tag  <span class="comment"># Tag &lt;image&gt; for upload to registry</span></span><br><span class="line">$ docker push username/repository:tag            <span class="comment"># Upload tagged image to registry</span></span><br><span class="line">$ docker run username/repository:tag                   <span class="comment"># Run image from a registry</span></span><br></pre></td></tr></table></figure>

<p><strong>part3 서비스</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ docker stack ls                                            <span class="comment"># List stacks or apps</span></span><br><span class="line">$ docker stack deploy -c &lt;composefile&gt; &lt;appname&gt;  <span class="comment"># Run the specified Compose file</span></span><br><span class="line">$ docker service ls                 <span class="comment"># List running services associated with an app</span></span><br><span class="line">$ docker service ps &lt;service&gt;                  <span class="comment"># List tasks associated with an app</span></span><br><span class="line">$ docker inspect &lt;task or container&gt;                   <span class="comment"># Inspect task or container</span></span><br><span class="line">$ docker container ls -q                                      <span class="comment"># List container IDs</span></span><br><span class="line">$ docker stack rm &lt;appname&gt;                             <span class="comment"># Tear down an application</span></span><br><span class="line">$ docker swarm leave --force      <span class="comment"># Take down a single node swarm from the manager</span></span><br></pre></td></tr></table></figure>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Docker/" rel="tag">Docker</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/09/16/Docker-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EA%B0%84-%EB%B3%BC%EB%A5%A8-%EA%B3%B5%EC%9C%A0-%EC%A1%B0%EC%82%AC/"
                    data-tooltip="Docker 컨테이너간 볼륨 공유 조사"
                    aria-label="PREVIOUS: Docker 컨테이너간 볼륨 공유 조사"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    <a
                        class="post-action-btn btn btn--disabled"
                        aria-hidden="true"
                    >
                        
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://usehun0625.github.io/2019/09/16/Docker-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=http://usehun0625.github.io/2019/09/16/Docker-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=http://usehun0625.github.io/2019/09/16/Docker-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="Table of Contents">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Kevin. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/09/16/Docker-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EA%B0%84-%EB%B3%BC%EB%A5%A8-%EA%B3%B5%EC%9C%A0-%EC%A1%B0%EC%82%AC/"
                    data-tooltip="Docker 컨테이너간 볼륨 공유 조사"
                    aria-label="PREVIOUS: Docker 컨테이너간 볼륨 공유 조사"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    <a
                        class="post-action-btn btn btn--disabled"
                        aria-hidden="true"
                    >
                        
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://usehun0625.github.io/2019/09/16/Docker-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=http://usehun0625.github.io/2019/09/16/Docker-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=http://usehun0625.github.io/2019/09/16/Docker-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="Table of Contents">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=http://usehun0625.github.io/2019/09/16/Docker-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/"
                        aria-label="Share on Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=http://usehun0625.github.io/2019/09/16/Docker-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/"
                        aria-label="Share on Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=http://usehun0625.github.io/2019/09/16/Docker-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/"
                        aria-label="Share on Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/beer.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Kevin</h4>
        
            <div id="about-card-bio"><p>Kevin, 이용훈<br>어릴 때부터 코딩에 흥미를 가지고 살아왔습니다. 새로운 기술도 열정적으로 받아들이며 더 좋은 개발을 위하여 학습하고 경험하고 노력하고 있습니다.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Developer, DE</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                서울 / 대한민국
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/curtain.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'http://usehun0625.github.io/2019/09/16/Docker-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/';
              
            this.page.identifier = '2019/09/16/Docker-기초-학습-정리/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'usehun0625';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    




    </body>
</html>
