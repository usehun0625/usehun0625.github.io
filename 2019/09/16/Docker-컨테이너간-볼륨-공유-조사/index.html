
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Kevin의 블로그">
    <title>Docker 컨테이너간 볼륨 공유 조사 - Kevin의 블로그</title>
    <meta name="author" content="Kevin">
    
    
        <link rel="icon" href="http://usehun0625.github.io/assets/images/beer_favaicon.png">
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kevin","sameAs":["https://github.com/usehun0625/","mailto:usehun0625@gmail.com"],"image":"beer.jpg"},"articleBody":"\n컨테이너간 볼륨 공유를 위하여 호스트 OS에 공유 볼륨을 생성하는 방법을 확인하고 실제로 테스트하여 동작 확인 한다.\n\n\n다수의 Docker 컨테이너(이하 컨테이너)를 운영하다가 보면 컨테이너 간에 볼륨 공유가 필요할 상황이 있다.예를 들면 Apache 서버 컨테이너의 로그 파일을 Fluentd 컨테이너로 수집하는 경우이다.이 경우 Fluentd가 Apache 서버의 로그 파일을 접근하려면 다음과 같이 두 가지 방법이 존재한다.\n\nFluentd가 Apache 서버 컨테이너 볼륨에 접근하여 로그 파일을 수집하는 방법\n호스트 OS에 공유 볼륨을 생성한 후 이 공간에 Apache 서버는 로그 파일을 저장하고 Fluentd는 로그 파일을 수집하는 방법\n\nVolume을 활용한 Data 관리를 살펴보면 후자의 방법이 합리적이라고 설명하고 있다.여기서는 컨테이너간 볼륨 공유를 위하여 호스트 OS에 공유 볼륨을 생성하는 방법을 확인하고 실제로 테스트하여 동작 확인 한다.\nDocker로 호스트 OS에 볼륨을 공유하는 방법Docker 공식 문서 - 저장 공간을 살펴보면 mount 하는 방법에 따라 다음과 같이 구분한다. \n\nBind mount\nVolume\nTmpfs\n\n이 문서에서는 휘발성 메모리에 mount 하는 tmpfs에 대하여는 다루지 않는다.\n테스트 환경다음과 같은 환경에서 테스트 하였다.\n\nOS \n버전 : masOS Mojave v10.14.6\n\n\nDocker\n버전 : 19.03.2\nPython 이미지 - 버전 : 3.6\nFluentd 이미지 - 버전 : v1.0.2 \n\n\n\n사용되는 Docker CLI 명령어이 문서에서는 다음과 같은 Docker 명령어를 사용한다.\n\ndocker build\ndocker container\ndocker image\ndocker run\ndocker stop\ndocker rm\ndocker volume\n\n위의 나열된 명령어의 설명과 사용법은 다음 링크에서 찾아서 확인한다.\n\nhttps://docs.docker.com/engine/reference/commandline/cli/\n\nmount와 관련하여 다음과 같은 주의사항이 있다.\n\n-v 옵션 : Host OS에서 해당 경로의 디렉터리가 존재하지 않으면 새롭게 생성한다.–mount 옵션 : Host OS에서 해당 경로의 디렉터리가 존재하지 않으면 mount 자체가 안 된다.\n\n테스트 사전 정보환경 변수 등록테스트 편의를 위하여 아래 예시처럼 환경 변수를 등록하여 사용한다.\n12# 환경변수 등록$ export DOCKER_SHARED_VOLUME_TEST_PATH=/Users/kevin/dev/docker/test/shared_volume\n1234567# 환경변수 확인$ env... 중략 ...DOCKER_SHARED_VOLUME_TEST_PATH=/Users/kevin/dev/docker/test/shared_volume... 중략 ...\n\n“로그생성” 컨테이너 이미지 생성이 테스트에서는 “로그생성” 컨테이너의 이미지 생성은 다음과 같이 한다.\n\n다음과 같이 Dockerfile을 생성한다.\n\n12345678$ cat image_of_make_logfile/DockerfileFROM python:3.6RUN mkdir -p /appRUN mkdir -p /app/inputWORKDIR /appCOPY . /appENV NAME Make_Log_FileCMD [\"python\", \"make_log.py\", \"5\", \"60\", \"/app/input/\"]\n\n\nmake_log.py*를 *image_of_make_logfile/ 경로에 추가한다.\n\n\nmake_log.py\n\n123$ treeimage_of_make_logfile└── make_log.py\n\n\n다음과 같이 Docker 이미지를 생성한다.\n\n1234567891011121314151617181920212223242526272829$ cd image_of_make_logfile$ docker build --tag=make_logfile_image .Sending build context to Docker daemon  11.26kBStep 1/7 : FROM python:3.6 ---&gt; 1c515a624542Step 2/7 : RUN mkdir -p /app ---&gt; Running in a993e327f25cRemoving intermediate container a993e327f25c ---&gt; b4b52d6451f8Step 3/7 : RUN mkdir -p /app/input ---&gt; Running in a944e3182d51Removing intermediate container a944e3182d51 ---&gt; 20d3277a9ee7Step 4/7 : WORKDIR /app ---&gt; Running in 09577255b80aRemoving intermediate container 09577255b80a ---&gt; 2d6f8cbc1cdeStep 5/7 : COPY . /app ---&gt; dcbd7f937badStep 6/7 : ENV NAME Make_Log_File ---&gt; Running in b41268eb0611Removing intermediate container b41268eb0611 ---&gt; 1c2d3febff85Step 7/7 : CMD [\"python\", \"make_log.py\", \"5\", \"60\", \"/app/input/\"] ---&gt; Running in 630ce115c0e4Removing intermediate container 630ce115c0e4 ---&gt; 5a345b58606cSuccessfully built 5a345b58606cSuccessfully tagged make_logfile_image:latest\n\n“로그수집” 컨테이너 설정파일Fluentd 이미지를 사용할 예정이며 td-agent 설정 파일은 다음과 같다.\n12345678910111213141516171819202122232425262728$ cat fluentd/td_agent.conf&lt;source&gt;  @type tail  tag docker_log_collect  path /input/*  &lt;parse&gt;    @type none  &lt;/parse&gt;  refresh_interval 5s  read_from_head true&lt;/source&gt;&lt;match docker_log_collect*&gt;  @type file  path /output/$&#123;tag&#125;_output  add_path_suffix true  path_suffix \".log\"  append true  &lt;buffer tag&gt;    flush_mode interval    flush_interval 3s  &lt;/buffer&gt;  &lt;format&gt;    @type out_file    output_tag false    output_time true  &lt;/format&gt;&lt;/match&gt;\n\n\nBind mountBind mount는 Host OS에 종속적이다.컨테이너를 실행하면 –mount 혹은 -v 옵션에서 Host OS 로컬 경로와 컨테이너 경로를 mount만 하면 사용할 수 있다. 만약 컨테이너와 Bind mount된 Storage에 파일이 저장된다면 Host OS에서도 확인할 수도 있다.더 자세한 내용은 다음의 링크를 참고하면 된다.\n\nDocker 공식 문서 - 저장 공간 / Bind mounts\n\n테스트다음과 같은 시나리오를 바탕으로 테스트를 할 예정이다.\n\n“로그생성” 컨테이너를 구성하고 실행한다.\n“로그수집” 컨테이너를 구성하고 실행한다.\nHost OS 상에서 입력용 로그 파일과 출력용 로그 파일을 비교한다.\n\n1. 로그 생성 컨테이너 실행테스트 사전 정보에서 생성한 Docker 이미지를 바탕으로 컨테이너를 실행한다.\n12$ docker run -d --name=make_logfile_container --mount type=bind,source=$&#123;DOCKER_SHARED_VOLUME_TEST_PATH&#125;/host_storage/input,target=/app/input make_logfile_image:latestbd31f0fb4e4a03eb16375e5ff6fcd1e95998dec26802cb457f56f5ff31572b46\n\n컨테이너의 상태를 확인한다.\n123$ docker container ps --allCONTAINER ID        IMAGE                       COMMAND                  CREATED              STATUS              PORTS               NAMESbd31f0fb4e4a        make_logfile_image:latest   \"python make_log.py …\"   About a minute ago   Up About a minute                       make_logfile_container\n\n컨테이너의 Mount상태를 확인한다.\n1234567891011121314$ docker inspect make_logfile_container[    ... 중략 ...    \"Mounts\": [            &#123;                \"Type\": \"bind\",                \"Source\": \"/Users/kevin/dev/docker/test/shared_volume/host_storage/input\",                \"Destination\": \"/app/input\",                \"Mode\": \"\",                \"RW\": true,                \"Propagation\": \"rprivate\"            &#125;        ],]\n\n입력용 로그 파일에 로그가 저장되는지 확인한다.\n12345678$ cat host_storage&#x2F;input&#x2F;2019-09-10.log0-0    2019&#x2F;09&#x2F;10T05:49:19    scala0-1    2019&#x2F;09&#x2F;10T05:49:20    ruby0-2    2019&#x2F;09&#x2F;10T05:49:21    c++0-3    2019&#x2F;09&#x2F;10T05:49:22    c++0-4    2019&#x2F;09&#x2F;10T05:49:23    c++... 중략 ...\n초당 1개 로그를  5분간 파일에 저장한다.\n2. 로그 수집 컨테이너 실행테스트 사전 정보의 td-agent 설정 파일을 바탕으로 Fluentd 컨테이너를 다음과 같이 실행한다.\n12$ docker run -d --name=log_collector_container --mount type=bind,source=$&#123;DOCKER_SHARED_VOLUME_TEST_PATH&#125;/host_storage/input,target=/input --mount type=bind,source=$&#123;DOCKER_SHARED_VOLUME_TEST_PATH&#125;/host_storage/output,target=/output --mount type=bind,source=$&#123;DOCKER_SHARED_VOLUME_TEST_PATH&#125;/fluentd,target=/fluentd/etc -e FLUENTD_CONF=td_agent.conf fluent/fluentd:v1.0.247a6f572fdb2427a0872266ce373b9e99da1e2cae5ee4dc83f0d5aaaf6f56cd2\n\n컨테이너가 실행되었는지 확인한다.\n1234$ docker container ps --allCONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS                      PORTS                 NAMES47a6f572fdb2        fluent/fluentd:v1.0.2       \"/bin/entrypoint.sh …\"   5 minutes ago       Up 5 minutes                5140/tcp, 24224/tcp   log_collector_containerbd31f0fb4e4a        make_logfile_image:latest   \"python make_log.py …\"   22 minutes ago      Exited (0) 17 minutes ago                         make_logfile_container\n\n컨테이너의 Mount상태를 확인한다.\n123456789101112131415161718192021222324252627282930$ docker inspect log_collector_container[    ... 중략 ...    \"Mounts\": [            &#123;                \"Type\": \"bind\",                \"Source\": \"/Users/kevin/dev/docker/test/shared_volume/host_storage/input\",                \"Destination\": \"/input\",                \"Mode\": \"\",                \"RW\": true,                \"Propagation\": \"rprivate\"            &#125;,&#123;                \"Type\": \"bind\",                \"Source\": \"/Users/kevin/dev/docker/test/shared_volume/host_storage/output\",                \"Destination\": \"/output\",                \"Mode\": \"\",                \"RW\": true,                \"Propagation\": \"rprivate\"            &#125;,            &#123;                \"Type\": \"bind\",                \"Source\": \"/Users/kevin/dev/docker/test/shared_volume/fluentd\",                \"Destination\": \"/fluentd/etc\",                \"Mode\": \"\",                \"RW\": true,                \"Propagation\": \"rprivate\"            &#125;        ],]\n\n출력용 로그파일에 저장되는지 확인한다.\n12345678$ cat host_storage/output/docker_log_collect_output.log019-09-10T06:06:39+00:00\t&#123;\"message\":\"0-0    2019/09/10T05:49:19    scala\"&#125;2019-09-10T06:06:39+00:00\t&#123;\"message\":\"0-1    2019/09/10T05:49:20    ruby\"&#125;2019-09-10T06:06:39+00:00\t&#123;\"message\":\"0-2    2019/09/10T05:49:21    c++\"&#125;2019-09-10T06:06:39+00:00\t&#123;\"message\":\"0-3    2019/09/10T05:49:22    c++\"&#125;2019-09-10T06:06:39+00:00\t&#123;\"message\":\"0-4    2019/09/10T05:49:23    c++\"&#125;... 중략 ...\n\n3. 입,출력용 로그 파일 확인입력용 로그 파일을 확인한다.\n12345678$ cat host_storage/input/2019-09-10.log0-0    2019/09/10T05:49:19    scala0-1    2019/09/10T05:49:20    ruby0-2    2019/09/10T05:49:21    c++0-3    2019/09/10T05:49:22    c++0-4    2019/09/10T05:49:23    c++... 중략 ...\n\n12$ cat host_storage/input/2019-09-10.log| wc -l300\n\n출력용 로그 파일을 확인한다.\n12345678$ cat host_storage/output/docker_log_collect_output.log019-09-10T06:06:39+00:00\t&#123;\"message\":\"0-0    2019/09/10T05:49:19    scala\"&#125;2019-09-10T06:06:39+00:00\t&#123;\"message\":\"0-1    2019/09/10T05:49:20    ruby\"&#125;2019-09-10T06:06:39+00:00\t&#123;\"message\":\"0-2    2019/09/10T05:49:21    c++\"&#125;2019-09-10T06:06:39+00:00\t&#123;\"message\":\"0-3    2019/09/10T05:49:22    c++\"&#125;2019-09-10T06:06:39+00:00\t&#123;\"message\":\"0-4    2019/09/10T05:49:23    c++\"&#125;... 중략 ...\n\n12$ cat host_storage/output/docker_log_collect_output.log| wc -l300\n\n입력용 로그 파일과 출력용 로그 파일을 비교한 결과는 다음과 같이 정리할 수 있다.\n\n입력용 로그 파일의 내용은 출력용 로그 파일에 ‘수집날짜 { “message” : “로그 내용” } 형태로 저장된다.\n\n\nVolumeVolume 마운트는 Host OS에 파일 시스템에 종속적이지 않으며 Docker에서 완전히 관리 한다.volume 마운트를 사용하기 위해서는 Docker 명령으로 volume 생성이 필요하다.더 자세한 내용은 다음의 링크를 참고하면 된다.\n\nDocker 공식 문서 - 저장 공간 / Volume\n\n테스트다음과 같은 시나리오를 바탕으로 테스트를 할 예정이다.\n\nVolume을 생성한다.\n“로그생성” 컨테이너를 구성하고 실행한다.\n“로그수집” 컨테이너를 구성하고 실행한다.\nHost OS 상에서 입력용 로그 파일과 출력용 로그 파일을 비교한다.\n\n1. Volume 생성다음과 같이 Volume을 생성한다.\n12$ docker volume create logfile_inputlogfile_input\n\n다음과 같은 명령으로 Volume의 상태를 확인한다.\n123456789101112$ docker volume inspect logfile_input[    &#123;        &quot;CreatedAt&quot;: &quot;2019-09-10T08:41:41Z&quot;,        &quot;Driver&quot;: &quot;local&quot;,        &quot;Labels&quot;: &#123;&#125;,        &quot;Mountpoint&quot;: &quot;&#x2F;var&#x2F;lib&#x2F;docker&#x2F;volumes&#x2F;logfile_input&#x2F;_data&quot;,        &quot;Name&quot;: &quot;logfile_input&quot;,        &quot;Options&quot;: &#123;&#125;,        &quot;Scope&quot;: &quot;local&quot;    &#125;]\n\n2. 로그 생성 컨테이너 실행테스트 사전 정보에서 생성한 Docker 이미지를 바탕으로 컨테이너를 실행한다.\n12$ docker run -d --name=make_logfile_container --mount type=volume,source=logfile_input,target=/app/input make_logfile_image:latest7a265902761be76af2957140e0966b99d297e0fda78f5dffe17df9daca4c7453\n\n컨테이너의 동작을 확인한다.\n123$ docker container ps --allCONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS              PORTS               NAMES1dcc4e6c3181        make_logfile_image:latest   \"python make_log.py …\"   2 minutes ago       Up 2 minutes                            make_logfile_container\n\n컨테이너의 Mount상태를 확인한다.\n12345678910111213141516$ docker inspect make_logfile_container[    ... 중략 ...    \"Mounts\": [            &#123;                \"Type\": \"volume\",                \"Name\": \"logfile_input\",                \"Source\": \"/var/lib/docker/volumes/logfile_input/_data\",                \"Destination\": \"/app/input\",                \"Driver\": \"local\",                \"Mode\": \"z\",                \"RW\": true,                \"Propagation\": \"\"            &#125;        ],]\n\n3. 로그 수집 컨테이너 실행테스트 사전 정보의 td-agent 설정 파일을 바탕으로 Fluentd 컨테이너를 다음과 같이 실행한다.\n12$ docker run -d --name=log_collector_container --mount type=volume,source=logfile_input,target=/input --mount type=bind,source=$&#123;DOCKER_SHARED_VOLUME_TEST_PATH&#125;/host_storage/output,target=/output -v $&#123;DOCKER_SHARED_VOLUME_TEST_PATH&#125;/fluentd:/fluentd/etc -e FLUENTD_CONF=td_agent.conf fluent/fluentd:v1.0.2ba7be8af4dc7ddea4ba30ebccb80736f9700717289748b74e27ab45e9ab22195\n\n컨테이너가 실행되었는지 확인한다.\n1234$ docker container ps --allCONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS              PORTS                 NAMESba7be8af4dc7        fluent/fluentd:v1.0.2       \"/bin/entrypoint.sh …\"   5 seconds ago       Up 4 seconds        5140/tcp, 24224/tcp   log_collector_container1dcc4e6c3181        make_logfile_image:latest   \"python make_log.py …\"   4 minutes ago       Up 4 minutes\n\n3. 출력용 로그 파일 확인출력용 로그 파일을 확인한다.\n12345678$ cat host_storage/output/docker_log_collect_output.log2019-09-16T00:41:33+00:00\t&#123;\"message\":\"0-0    2019/09/10T09:39:39    kotlin\"&#125;2019-09-16T00:41:33+00:00\t&#123;\"message\":\"0-1    2019/09/10T09:39:40    ruby\"&#125;2019-09-16T00:41:33+00:00\t&#123;\"message\":\"0-2    2019/09/10T09:39:41    c++\"&#125;2019-09-16T00:41:33+00:00\t&#123;\"message\":\"0-3    2019/09/10T09:39:42    kotlin\"&#125;2019-09-16T00:41:33+00:00\t&#123;\"message\":\"0-4    2019/09/10T09:39:43    scala\"&#125;... 중략 ...\n\n12$ cat host_storage/output/docker_log_collect_output.log| wc -l300\n\n출력용 로그 파일을 확인한 결과 다음과 같이 정리할 수 있다.\n\n입력용 로그 파일의 내용이 출력용 로그 파일에 ‘수집날짜 { “message” : “로그 내용” } 형태로 저장된다.\n\n","dateCreated":"2019-09-16T23:24:24+09:00","dateModified":"2020-02-13T06:35:03+09:00","datePublished":"2019-09-16T23:24:24+09:00","description":"\n컨테이너간 볼륨 공유를 위하여 호스트 OS에 공유 볼륨을 생성하는 방법을 확인하고 실제로 테스트하여 동작 확인 한다.","headline":"Docker 컨테이너간 볼륨 공유 조사","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"http://usehun0625.github.io/2019/09/16/Docker-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EA%B0%84-%EB%B3%BC%EB%A5%A8-%EA%B3%B5%EC%9C%A0-%EC%A1%B0%EC%82%AC/"},"publisher":{"@type":"Organization","name":"Kevin","sameAs":["https://github.com/usehun0625/","mailto:usehun0625@gmail.com"],"image":"beer.jpg","logo":{"@type":"ImageObject","url":"beer.jpg"}},"url":"http://usehun0625.github.io/2019/09/16/Docker-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EA%B0%84-%EB%B3%BC%EB%A5%A8-%EA%B3%B5%EC%9C%A0-%EC%A1%B0%EC%82%AC/","keywords":"Docker"}</script>
    <meta name="description" content="컨테이너간 볼륨 공유를 위하여 호스트 OS에 공유 볼륨을 생성하는 방법을 확인하고 실제로 테스트하여 동작 확인 한다.">
<meta property="og:type" content="blog">
<meta property="og:title" content="Docker 컨테이너간 볼륨 공유 조사">
<meta property="og:url" content="http://usehun0625.github.io/2019/09/16/Docker-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EA%B0%84-%EB%B3%BC%EB%A5%A8-%EA%B3%B5%EC%9C%A0-%EC%A1%B0%EC%82%AC/index.html">
<meta property="og:site_name" content="Kevin의 블로그">
<meta property="og:description" content="컨테이너간 볼륨 공유를 위하여 호스트 OS에 공유 볼륨을 생성하는 방법을 확인하고 실제로 테스트하여 동작 확인 한다.">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2019-09-16T14:24:24.000Z">
<meta property="article:modified_time" content="2020-02-12T21:35:03.194Z">
<meta property="article:author" content="Kevin">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="http://usehun0625.github.io/assets/images/beer.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Kevin의 블로그
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/beer.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/beer.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Kevin</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Kevin, 이용훈<br>어릴 때부터 코딩에 흥미를 가지고 살아왔습니다. 새로운 기술도 열정적으로 받아들이며 더 좋은 개발을 위하여 학습하고 경험하고 노력하고 있습니다.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/"
                            title="홈"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">홈</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="카테고리"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="태그"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="/all-archives"
                            
                            title="아카이브"
                        >
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/usehun0625/" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:usehun0625@gmail.com" target="_blank" rel="noopener" title="Mail">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Docker 컨테이너간 볼륨 공유 조사
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2019-09-16T23:24:24+09:00">
	
		    Sep 16, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%EA%B0%80%EC%83%81%ED%99%94-%EC%97%94%EC%A7%84/">가상화 엔진</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h1 id="table-of-contents">Table of Contents</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker로-호스트-OS에-볼륨을-공유하는-방법"><span class="toc-text">Docker로 호스트 OS에 볼륨을 공유하는 방법</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#테스트-환경"><span class="toc-text">테스트 환경</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#사용되는-Docker-CLI-명령어"><span class="toc-text">사용되는 Docker CLI 명령어</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#테스트-사전-정보"><span class="toc-text">테스트 사전 정보</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#환경-변수-등록"><span class="toc-text">환경 변수 등록</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#“로그생성”-컨테이너-이미지-생성"><span class="toc-text">“로그생성” 컨테이너 이미지 생성</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#“로그수집”-컨테이너-설정파일"><span class="toc-text">“로그수집” 컨테이너 설정파일</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Bind-mount"><span class="toc-text">Bind mount</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#테스트"><span class="toc-text">테스트</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-로그-생성-컨테이너-실행"><span class="toc-text">1. 로그 생성 컨테이너 실행</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-로그-수집-컨테이너-실행"><span class="toc-text">2. 로그 수집 컨테이너 실행</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-입-출력용-로그-파일-확인"><span class="toc-text">3. 입,출력용 로그 파일 확인</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Volume"><span class="toc-text">Volume</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#테스트-1"><span class="toc-text">테스트</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Volume-생성"><span class="toc-text">1. Volume 생성</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-로그-생성-컨테이너-실행"><span class="toc-text">2. 로그 생성 컨테이너 실행</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-로그-수집-컨테이너-실행"><span class="toc-text">3. 로그 수집 컨테이너 실행</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-출력용-로그-파일-확인"><span class="toc-text">3. 출력용 로그 파일 확인</span></a></li></ol></li></ol></li></ol>
<p>컨테이너간 볼륨 공유를 위하여 호스트 OS에 공유 볼륨을 생성하는 방법을 확인하고 실제로 테스트하여 동작 확인 한다.</p>
<a id="more"></a>

<p>다수의 Docker 컨테이너(이하 컨테이너)를 운영하다가 보면 컨테이너 간에 볼륨 공유가 필요할 상황이 있다.<br>예를 들면 Apache 서버 컨테이너의 로그 파일을 Fluentd 컨테이너로 수집하는 경우이다.<br>이 경우 Fluentd가 Apache 서버의 로그 파일을 접근하려면 다음과 같이 두 가지 방법이 존재한다.</p>
<ul>
<li>Fluentd가 Apache 서버 컨테이너 볼륨에 접근하여 로그 파일을 수집하는 방법</li>
<li>호스트 OS에 공유 볼륨을 생성한 후 이 공간에 Apache 서버는 로그 파일을 저장하고 Fluentd는 로그 파일을 수집하는 방법</li>
</ul>
<p><a href="https://medium.com/dtevangelist/docker-%EA%B8%B0%EB%B3%B8-5-8-volume%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-data-%EA%B4%80%EB%A6%AC-9a9ac1db978c" target="_blank" rel="noopener">Volume을 활용한 Data 관리</a>를 살펴보면 후자의 방법이 합리적이라고 설명하고 있다.<br>여기서는 컨테이너간 볼륨 공유를 위하여 호스트 OS에 공유 볼륨을 생성하는 방법을 확인하고 실제로 테스트하여 동작 확인 한다.</p>
<h1 id="Docker로-호스트-OS에-볼륨을-공유하는-방법"><a href="#Docker로-호스트-OS에-볼륨을-공유하는-방법" class="headerlink" title="Docker로 호스트 OS에 볼륨을 공유하는 방법"></a>Docker로 호스트 OS에 볼륨을 공유하는 방법</h1><p>Docker 공식 문서 - 저장 공간을 살펴보면 mount 하는 방법에 따라 다음과 같이 구분한다. </p>
<ul>
<li>Bind mount</li>
<li>Volume</li>
<li><del>Tmpfs</del></li>
</ul>
<p><em>이 문서에서는 휘발성 메모리에 mount 하는 tmpfs에 대하여는 다루지 않는다.</em></p>
<h1 id="테스트-환경"><a href="#테스트-환경" class="headerlink" title="테스트 환경"></a>테스트 환경</h1><p>다음과 같은 환경에서 테스트 하였다.</p>
<ul>
<li>OS <ul>
<li>버전 : masOS Mojave v10.14.6</li>
</ul>
</li>
<li>Docker<ul>
<li>버전 : 19.03.2</li>
<li>Python 이미지 - 버전 : 3.6</li>
<li>Fluentd 이미지 - 버전 : v1.0.2 </li>
</ul>
</li>
</ul>
<h1 id="사용되는-Docker-CLI-명령어"><a href="#사용되는-Docker-CLI-명령어" class="headerlink" title="사용되는 Docker CLI 명령어"></a>사용되는 Docker CLI 명령어</h1><p>이 문서에서는 다음과 같은 Docker 명령어를 사용한다.</p>
<ul>
<li>docker build</li>
<li>docker container</li>
<li>docker image</li>
<li>docker run</li>
<li>docker stop</li>
<li>docker rm</li>
<li>docker volume</li>
</ul>
<p>위의 나열된 명령어의 설명과 사용법은 다음 링크에서 찾아서 확인한다.</p>
<ul>
<li><a href="https://docs.docker.com/engine/reference/commandline/cli/" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/commandline/cli/</a></li>
</ul>
<p>mount와 관련하여 다음과 같은 주의사항이 있다.</p>
<blockquote>
<p>-v 옵션 : Host OS에서 해당 경로의 디렉터리가 존재하지 않으면 새롭게 생성한다.<br>–mount 옵션 : Host OS에서 해당 경로의 디렉터리가 존재하지 않으면 mount 자체가 안 된다.</p>
</blockquote>
<h1 id="테스트-사전-정보"><a href="#테스트-사전-정보" class="headerlink" title="테스트 사전 정보"></a>테스트 사전 정보</h1><h2 id="환경-변수-등록"><a href="#환경-변수-등록" class="headerlink" title="환경 변수 등록"></a>환경 변수 등록</h2><p>테스트 편의를 위하여 아래 예시처럼 환경 변수를 등록하여 사용한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 환경변수 등록</span></span><br><span class="line">$ <span class="built_in">export</span> DOCKER_SHARED_VOLUME_TEST_PATH=/Users/kevin/dev/docker/<span class="built_in">test</span>/shared_volume</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 환경변수 확인</span></span><br><span class="line">$ env</span><br><span class="line">... 중략 ...</span><br><span class="line"></span><br><span class="line">DOCKER_SHARED_VOLUME_TEST_PATH=/Users/kevin/dev/docker/<span class="built_in">test</span>/shared_volume</span><br><span class="line"></span><br><span class="line">... 중략 ...</span><br></pre></td></tr></table></figure>

<h2 id="“로그생성”-컨테이너-이미지-생성"><a href="#“로그생성”-컨테이너-이미지-생성" class="headerlink" title="“로그생성” 컨테이너 이미지 생성"></a>“로그생성” 컨테이너 이미지 생성</h2><p>이 테스트에서는 “로그생성” 컨테이너의 이미지 생성은 다음과 같이 한다.</p>
<ol>
<li>다음과 같이 Dockerfile을 생성한다.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cat image_of_make_logfile/Dockerfile</span><br><span class="line">FROM python:3.6</span><br><span class="line">RUN mkdir -p /app</span><br><span class="line">RUN mkdir -p /app/input</span><br><span class="line">WORKDIR /app</span><br><span class="line">COPY . /app</span><br><span class="line">ENV NAME Make_Log_File</span><br><span class="line">CMD [<span class="string">"python"</span>, <span class="string">"make_log.py"</span>, <span class="string">"5"</span>, <span class="string">"60"</span>, <span class="string">"/app/input/"</span>]</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><em>make_log.py*를 *image_of_make_logfile/</em> 경로에 추가한다.</li>
</ol>
<ul>
<li><a href="/post_attachment/Docker-컨테이너간-볼륨-공유-조사/make_log.py" target="_blank">make_log.py</a></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">image_of_make_logfile</span><br><span class="line">└── make_log.py</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>다음과 같이 Docker 이미지를 생성한다.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> image_of_make_logfile</span><br><span class="line">$ docker build --tag=make_logfile_image .</span><br><span class="line">Sending build context to Docker daemon  11.26kB</span><br><span class="line">Step 1/7 : FROM python:3.6</span><br><span class="line"> ---&gt; 1c515a624542</span><br><span class="line">Step 2/7 : RUN mkdir -p /app</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> a993e327f25c</span><br><span class="line">Removing intermediate container a993e327f25c</span><br><span class="line"> ---&gt; b4b52d6451f8</span><br><span class="line">Step 3/7 : RUN mkdir -p /app/input</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> a944e3182d51</span><br><span class="line">Removing intermediate container a944e3182d51</span><br><span class="line"> ---&gt; 20d3277a9ee7</span><br><span class="line">Step 4/7 : WORKDIR /app</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 09577255b80a</span><br><span class="line">Removing intermediate container 09577255b80a</span><br><span class="line"> ---&gt; 2d6f8cbc1cde</span><br><span class="line">Step 5/7 : COPY . /app</span><br><span class="line"> ---&gt; dcbd7f937bad</span><br><span class="line">Step 6/7 : ENV NAME Make_Log_File</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> b41268eb0611</span><br><span class="line">Removing intermediate container b41268eb0611</span><br><span class="line"> ---&gt; 1c2d3febff85</span><br><span class="line">Step 7/7 : CMD [<span class="string">"python"</span>, <span class="string">"make_log.py"</span>, <span class="string">"5"</span>, <span class="string">"60"</span>, <span class="string">"/app/input/"</span>]</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 630ce115c0e4</span><br><span class="line">Removing intermediate container 630ce115c0e4</span><br><span class="line"> ---&gt; 5a345b58606c</span><br><span class="line">Successfully built 5a345b58606c</span><br><span class="line">Successfully tagged make_logfile_image:latest</span><br></pre></td></tr></table></figure>

<h2 id="“로그수집”-컨테이너-설정파일"><a href="#“로그수집”-컨테이너-설정파일" class="headerlink" title="“로그수집” 컨테이너 설정파일"></a>“로그수집” 컨테이너 설정파일</h2><p>Fluentd 이미지를 사용할 예정이며 td-agent 설정 파일은 다음과 같다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ cat fluentd/td_agent.conf</span><br><span class="line">&lt;<span class="built_in">source</span>&gt;</span><br><span class="line">  @<span class="built_in">type</span> tail</span><br><span class="line">  tag docker_log_collect</span><br><span class="line">  path /input/*</span><br><span class="line">  &lt;parse&gt;</span><br><span class="line">    @<span class="built_in">type</span> none</span><br><span class="line">  &lt;/parse&gt;</span><br><span class="line">  refresh_interval 5s</span><br><span class="line">  read_from_head <span class="literal">true</span></span><br><span class="line">&lt;/<span class="built_in">source</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;match docker_log_collect*&gt;</span><br><span class="line">  @<span class="built_in">type</span> file</span><br><span class="line">  path /output/<span class="variable">$&#123;tag&#125;</span>_output</span><br><span class="line">  add_path_suffix <span class="literal">true</span></span><br><span class="line">  path_suffix <span class="string">".log"</span></span><br><span class="line">  append <span class="literal">true</span></span><br><span class="line">  &lt;buffer tag&gt;</span><br><span class="line">    flush_mode interval</span><br><span class="line">    flush_interval 3s</span><br><span class="line">  &lt;/buffer&gt;</span><br><span class="line">  &lt;format&gt;</span><br><span class="line">    @<span class="built_in">type</span> out_file</span><br><span class="line">    output_tag <span class="literal">false</span></span><br><span class="line">    output_time <span class="literal">true</span></span><br><span class="line">  &lt;/format&gt;</span><br><span class="line">&lt;/match&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Bind-mount"><a href="#Bind-mount" class="headerlink" title="Bind mount"></a>Bind mount</h1><p>Bind mount는 Host OS에 종속적이다.<br>컨테이너를 실행하면 –mount 혹은 -v 옵션에서 Host OS 로컬 경로와 컨테이너 경로를 mount만 하면 사용할 수 있다. 만약 컨테이너와 Bind mount된 Storage에 파일이 저장된다면 Host OS에서도 확인할 수도 있다.<br>더 자세한 내용은 다음의 링크를 참고하면 된다.</p>
<ul>
<li><a href="https://docs.docker.com/storage/bind-mounts/" target="_blank" rel="noopener">Docker 공식 문서 - 저장 공간 / Bind mounts</a></li>
</ul>
<h2 id="테스트"><a href="#테스트" class="headerlink" title="테스트"></a>테스트</h2><p>다음과 같은 시나리오를 바탕으로 테스트를 할 예정이다.</p>
<ol>
<li>“로그생성” 컨테이너를 구성하고 실행한다.</li>
<li>“로그수집” 컨테이너를 구성하고 실행한다.</li>
<li>Host OS 상에서 입력용 로그 파일과 출력용 로그 파일을 비교한다.</li>
</ol>
<h3 id="1-로그-생성-컨테이너-실행"><a href="#1-로그-생성-컨테이너-실행" class="headerlink" title="1. 로그 생성 컨테이너 실행"></a>1. 로그 생성 컨테이너 실행</h3><p>테스트 사전 정보에서 생성한 Docker 이미지를 바탕으로 컨테이너를 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d --name=make_logfile_container --mount <span class="built_in">type</span>=<span class="built_in">bind</span>,<span class="built_in">source</span>=<span class="variable">$&#123;DOCKER_SHARED_VOLUME_TEST_PATH&#125;</span>/host_storage/input,target=/app/input make_logfile_image:latest</span><br><span class="line">bd31f0fb4e4a03eb16375e5ff6fcd1e95998dec26802cb457f56f5ff31572b46</span><br></pre></td></tr></table></figure>

<p>컨테이너의 상태를 확인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker container ps --all</span><br><span class="line">CONTAINER ID        IMAGE                       COMMAND                  CREATED              STATUS              PORTS               NAMES</span><br><span class="line">bd31f0fb4e4a        make_logfile_image:latest   <span class="string">"python make_log.py …"</span>   About a minute ago   Up About a minute                       make_logfile_container</span><br></pre></td></tr></table></figure>

<p>컨테이너의 Mount상태를 확인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ docker inspect make_logfile_container</span><br><span class="line">[</span><br><span class="line">    ... 중략 ...</span><br><span class="line">    <span class="string">"Mounts"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"Type"</span>: <span class="string">"bind"</span>,</span><br><span class="line">                <span class="string">"Source"</span>: <span class="string">"/Users/kevin/dev/docker/test/shared_volume/host_storage/input"</span>,</span><br><span class="line">                <span class="string">"Destination"</span>: <span class="string">"/app/input"</span>,</span><br><span class="line">                <span class="string">"Mode"</span>: <span class="string">""</span>,</span><br><span class="line">                <span class="string">"RW"</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="string">"Propagation"</span>: <span class="string">"rprivate"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>입력용 로그 파일에 로그가 저장되는지 확인한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cat host_storage&#x2F;input&#x2F;2019-09-10.log</span><br><span class="line">0-0    2019&#x2F;09&#x2F;10T05:49:19    scala</span><br><span class="line">0-1    2019&#x2F;09&#x2F;10T05:49:20    ruby</span><br><span class="line">0-2    2019&#x2F;09&#x2F;10T05:49:21    c++</span><br><span class="line">0-3    2019&#x2F;09&#x2F;10T05:49:22    c++</span><br><span class="line">0-4    2019&#x2F;09&#x2F;10T05:49:23    c++</span><br><span class="line"></span><br><span class="line">... 중략 ...</span><br></pre></td></tr></table></figure>
<p>초당 1개 로그를  5분간 파일에 저장한다.</p>
<h3 id="2-로그-수집-컨테이너-실행"><a href="#2-로그-수집-컨테이너-실행" class="headerlink" title="2. 로그 수집 컨테이너 실행"></a>2. 로그 수집 컨테이너 실행</h3><p>테스트 사전 정보의 td-agent 설정 파일을 바탕으로 Fluentd 컨테이너를 다음과 같이 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d --name=log_collector_container --mount <span class="built_in">type</span>=<span class="built_in">bind</span>,<span class="built_in">source</span>=<span class="variable">$&#123;DOCKER_SHARED_VOLUME_TEST_PATH&#125;</span>/host_storage/input,target=/input --mount <span class="built_in">type</span>=<span class="built_in">bind</span>,<span class="built_in">source</span>=<span class="variable">$&#123;DOCKER_SHARED_VOLUME_TEST_PATH&#125;</span>/host_storage/output,target=/output --mount <span class="built_in">type</span>=<span class="built_in">bind</span>,<span class="built_in">source</span>=<span class="variable">$&#123;DOCKER_SHARED_VOLUME_TEST_PATH&#125;</span>/fluentd,target=/fluentd/etc -e FLUENTD_CONF=td_agent.conf fluent/fluentd:v1.0.2</span><br><span class="line">47a6f572fdb2427a0872266ce373b9e99da1e2cae5ee4dc83f0d5aaaf6f56cd2</span><br></pre></td></tr></table></figure>

<p>컨테이너가 실행되었는지 확인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker container ps --all</span><br><span class="line">CONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS                      PORTS                 NAMES</span><br><span class="line">47a6f572fdb2        fluent/fluentd:v1.0.2       <span class="string">"/bin/entrypoint.sh …"</span>   5 minutes ago       Up 5 minutes                5140/tcp, 24224/tcp   log_collector_container</span><br><span class="line">bd31f0fb4e4a        make_logfile_image:latest   <span class="string">"python make_log.py …"</span>   22 minutes ago      Exited (0) 17 minutes ago                         make_logfile_container</span><br></pre></td></tr></table></figure>

<p>컨테이너의 Mount상태를 확인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">$ docker inspect log_collector_container</span><br><span class="line">[</span><br><span class="line">    ... 중략 ...</span><br><span class="line">    <span class="string">"Mounts"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"Type"</span>: <span class="string">"bind"</span>,</span><br><span class="line">                <span class="string">"Source"</span>: <span class="string">"/Users/kevin/dev/docker/test/shared_volume/host_storage/input"</span>,</span><br><span class="line">                <span class="string">"Destination"</span>: <span class="string">"/input"</span>,</span><br><span class="line">                <span class="string">"Mode"</span>: <span class="string">""</span>,</span><br><span class="line">                <span class="string">"RW"</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="string">"Propagation"</span>: <span class="string">"rprivate"</span></span><br><span class="line">            &#125;,</span><br><span class="line">&#123;</span><br><span class="line">                <span class="string">"Type"</span>: <span class="string">"bind"</span>,</span><br><span class="line">                <span class="string">"Source"</span>: <span class="string">"/Users/kevin/dev/docker/test/shared_volume/host_storage/output"</span>,</span><br><span class="line">                <span class="string">"Destination"</span>: <span class="string">"/output"</span>,</span><br><span class="line">                <span class="string">"Mode"</span>: <span class="string">""</span>,</span><br><span class="line">                <span class="string">"RW"</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="string">"Propagation"</span>: <span class="string">"rprivate"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"Type"</span>: <span class="string">"bind"</span>,</span><br><span class="line">                <span class="string">"Source"</span>: <span class="string">"/Users/kevin/dev/docker/test/shared_volume/fluentd"</span>,</span><br><span class="line">                <span class="string">"Destination"</span>: <span class="string">"/fluentd/etc"</span>,</span><br><span class="line">                <span class="string">"Mode"</span>: <span class="string">""</span>,</span><br><span class="line">                <span class="string">"RW"</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="string">"Propagation"</span>: <span class="string">"rprivate"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>출력용 로그파일에 저장되는지 확인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cat host_storage/output/docker_log_collect_output.log</span><br><span class="line">019-09-10T06:06:39+00:00	&#123;<span class="string">"message"</span>:<span class="string">"0-0    2019/09/10T05:49:19    scala"</span>&#125;</span><br><span class="line">2019-09-10T06:06:39+00:00	&#123;<span class="string">"message"</span>:<span class="string">"0-1    2019/09/10T05:49:20    ruby"</span>&#125;</span><br><span class="line">2019-09-10T06:06:39+00:00	&#123;<span class="string">"message"</span>:<span class="string">"0-2    2019/09/10T05:49:21    c++"</span>&#125;</span><br><span class="line">2019-09-10T06:06:39+00:00	&#123;<span class="string">"message"</span>:<span class="string">"0-3    2019/09/10T05:49:22    c++"</span>&#125;</span><br><span class="line">2019-09-10T06:06:39+00:00	&#123;<span class="string">"message"</span>:<span class="string">"0-4    2019/09/10T05:49:23    c++"</span>&#125;</span><br><span class="line"></span><br><span class="line">... 중략 ...</span><br></pre></td></tr></table></figure>

<h3 id="3-입-출력용-로그-파일-확인"><a href="#3-입-출력용-로그-파일-확인" class="headerlink" title="3. 입,출력용 로그 파일 확인"></a>3. 입,출력용 로그 파일 확인</h3><p>입력용 로그 파일을 확인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cat host_storage/input/2019-09-10.log</span><br><span class="line">0-0    2019/09/10T05:49:19    scala</span><br><span class="line">0-1    2019/09/10T05:49:20    ruby</span><br><span class="line">0-2    2019/09/10T05:49:21    c++</span><br><span class="line">0-3    2019/09/10T05:49:22    c++</span><br><span class="line">0-4    2019/09/10T05:49:23    c++</span><br><span class="line"></span><br><span class="line">... 중략 ...</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat host_storage/input/2019-09-10.log| wc -l</span><br><span class="line">300</span><br></pre></td></tr></table></figure>

<p>출력용 로그 파일을 확인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cat host_storage/output/docker_log_collect_output.log</span><br><span class="line">019-09-10T06:06:39+00:00	&#123;<span class="string">"message"</span>:<span class="string">"0-0    2019/09/10T05:49:19    scala"</span>&#125;</span><br><span class="line">2019-09-10T06:06:39+00:00	&#123;<span class="string">"message"</span>:<span class="string">"0-1    2019/09/10T05:49:20    ruby"</span>&#125;</span><br><span class="line">2019-09-10T06:06:39+00:00	&#123;<span class="string">"message"</span>:<span class="string">"0-2    2019/09/10T05:49:21    c++"</span>&#125;</span><br><span class="line">2019-09-10T06:06:39+00:00	&#123;<span class="string">"message"</span>:<span class="string">"0-3    2019/09/10T05:49:22    c++"</span>&#125;</span><br><span class="line">2019-09-10T06:06:39+00:00	&#123;<span class="string">"message"</span>:<span class="string">"0-4    2019/09/10T05:49:23    c++"</span>&#125;</span><br><span class="line"></span><br><span class="line">... 중략 ...</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat host_storage/output/docker_log_collect_output.log| wc -l</span><br><span class="line">300</span><br></pre></td></tr></table></figure>

<p>입력용 로그 파일과 출력용 로그 파일을 비교한 결과는 다음과 같이 정리할 수 있다.</p>
<blockquote>
<p>입력용 로그 파일의 내용은 출력용 로그 파일에 ‘수집날짜 { “message” : “로그 내용” } 형태로 저장된다.</p>
</blockquote>
<hr>
<h1 id="Volume"><a href="#Volume" class="headerlink" title="Volume"></a>Volume</h1><p>Volume 마운트는 Host OS에 파일 시스템에 종속적이지 않으며 Docker에서 완전히 관리 한다.<br>volume 마운트를 사용하기 위해서는 Docker 명령으로 volume 생성이 필요하다.<br>더 자세한 내용은 다음의 링크를 참고하면 된다.</p>
<ul>
<li><a href="https://docs.docker.com/storage/volumes/" target="_blank" rel="noopener">Docker 공식 문서 - 저장 공간 / Volume</a></li>
</ul>
<h2 id="테스트-1"><a href="#테스트-1" class="headerlink" title="테스트"></a>테스트</h2><p>다음과 같은 시나리오를 바탕으로 테스트를 할 예정이다.</p>
<ol>
<li>Volume을 생성한다.</li>
<li>“로그생성” 컨테이너를 구성하고 실행한다.</li>
<li>“로그수집” 컨테이너를 구성하고 실행한다.</li>
<li>Host OS 상에서 입력용 로그 파일과 출력용 로그 파일을 비교한다.</li>
</ol>
<h3 id="1-Volume-생성"><a href="#1-Volume-생성" class="headerlink" title="1. Volume 생성"></a>1. Volume 생성</h3><p>다음과 같이 Volume을 생성한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker volume create logfile_input</span><br><span class="line">logfile_input</span><br></pre></td></tr></table></figure>

<p>다음과 같은 명령으로 Volume의 상태를 확인한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ docker volume inspect logfile_input</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;CreatedAt&quot;: &quot;2019-09-10T08:41:41Z&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;local&quot;,</span><br><span class="line">        &quot;Labels&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Mountpoint&quot;: &quot;&#x2F;var&#x2F;lib&#x2F;docker&#x2F;volumes&#x2F;logfile_input&#x2F;_data&quot;,</span><br><span class="line">        &quot;Name&quot;: &quot;logfile_input&quot;,</span><br><span class="line">        &quot;Options&quot;: &#123;&#125;,</span><br><span class="line">        &quot;Scope&quot;: &quot;local&quot;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="2-로그-생성-컨테이너-실행"><a href="#2-로그-생성-컨테이너-실행" class="headerlink" title="2. 로그 생성 컨테이너 실행"></a>2. 로그 생성 컨테이너 실행</h3><p>테스트 사전 정보에서 생성한 Docker 이미지를 바탕으로 컨테이너를 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d --name=make_logfile_container --mount <span class="built_in">type</span>=volume,<span class="built_in">source</span>=logfile_input,target=/app/input make_logfile_image:latest</span><br><span class="line">7a265902761be76af2957140e0966b99d297e0fda78f5dffe17df9daca4c7453</span><br></pre></td></tr></table></figure>

<p>컨테이너의 동작을 확인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker container ps --all</span><br><span class="line">CONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS              PORTS               NAMES</span><br><span class="line">1dcc4e6c3181        make_logfile_image:latest   <span class="string">"python make_log.py …"</span>   2 minutes ago       Up 2 minutes                            make_logfile_container</span><br></pre></td></tr></table></figure>

<p>컨테이너의 Mount상태를 확인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ docker inspect make_logfile_container</span><br><span class="line">[</span><br><span class="line">    ... 중략 ...</span><br><span class="line">    <span class="string">"Mounts"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"Type"</span>: <span class="string">"volume"</span>,</span><br><span class="line">                <span class="string">"Name"</span>: <span class="string">"logfile_input"</span>,</span><br><span class="line">                <span class="string">"Source"</span>: <span class="string">"/var/lib/docker/volumes/logfile_input/_data"</span>,</span><br><span class="line">                <span class="string">"Destination"</span>: <span class="string">"/app/input"</span>,</span><br><span class="line">                <span class="string">"Driver"</span>: <span class="string">"local"</span>,</span><br><span class="line">                <span class="string">"Mode"</span>: <span class="string">"z"</span>,</span><br><span class="line">                <span class="string">"RW"</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="string">"Propagation"</span>: <span class="string">""</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="3-로그-수집-컨테이너-실행"><a href="#3-로그-수집-컨테이너-실행" class="headerlink" title="3. 로그 수집 컨테이너 실행"></a>3. 로그 수집 컨테이너 실행</h3><p>테스트 사전 정보의 td-agent 설정 파일을 바탕으로 Fluentd 컨테이너를 다음과 같이 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d --name=log_collector_container --mount <span class="built_in">type</span>=volume,<span class="built_in">source</span>=logfile_input,target=/input --mount <span class="built_in">type</span>=<span class="built_in">bind</span>,<span class="built_in">source</span>=<span class="variable">$&#123;DOCKER_SHARED_VOLUME_TEST_PATH&#125;</span>/host_storage/output,target=/output -v <span class="variable">$&#123;DOCKER_SHARED_VOLUME_TEST_PATH&#125;</span>/fluentd:/fluentd/etc -e FLUENTD_CONF=td_agent.conf fluent/fluentd:v1.0.2</span><br><span class="line">ba7be8af4dc7ddea4ba30ebccb80736f9700717289748b74e27ab45e9ab22195</span><br></pre></td></tr></table></figure>

<p>컨테이너가 실행되었는지 확인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker container ps --all</span><br><span class="line">CONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS              PORTS                 NAMES</span><br><span class="line">ba7be8af4dc7        fluent/fluentd:v1.0.2       <span class="string">"/bin/entrypoint.sh …"</span>   5 seconds ago       Up 4 seconds        5140/tcp, 24224/tcp   log_collector_container</span><br><span class="line">1dcc4e6c3181        make_logfile_image:latest   <span class="string">"python make_log.py …"</span>   4 minutes ago       Up 4 minutes</span><br></pre></td></tr></table></figure>

<h3 id="3-출력용-로그-파일-확인"><a href="#3-출력용-로그-파일-확인" class="headerlink" title="3. 출력용 로그 파일 확인"></a>3. 출력용 로그 파일 확인</h3><p>출력용 로그 파일을 확인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cat host_storage/output/docker_log_collect_output.log</span><br><span class="line">2019-09-16T00:41:33+00:00	&#123;<span class="string">"message"</span>:<span class="string">"0-0    2019/09/10T09:39:39    kotlin"</span>&#125;</span><br><span class="line">2019-09-16T00:41:33+00:00	&#123;<span class="string">"message"</span>:<span class="string">"0-1    2019/09/10T09:39:40    ruby"</span>&#125;</span><br><span class="line">2019-09-16T00:41:33+00:00	&#123;<span class="string">"message"</span>:<span class="string">"0-2    2019/09/10T09:39:41    c++"</span>&#125;</span><br><span class="line">2019-09-16T00:41:33+00:00	&#123;<span class="string">"message"</span>:<span class="string">"0-3    2019/09/10T09:39:42    kotlin"</span>&#125;</span><br><span class="line">2019-09-16T00:41:33+00:00	&#123;<span class="string">"message"</span>:<span class="string">"0-4    2019/09/10T09:39:43    scala"</span>&#125;</span><br><span class="line"></span><br><span class="line">... 중략 ...</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat host_storage/output/docker_log_collect_output.log| wc -l</span><br><span class="line">300</span><br></pre></td></tr></table></figure>

<p>출력용 로그 파일을 확인한 결과 다음과 같이 정리할 수 있다.</p>
<blockquote>
<p>입력용 로그 파일의 내용이 출력용 로그 파일에 ‘수집날짜 { “message” : “로그 내용” } 형태로 저장된다.</p>
</blockquote>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Docker/" rel="tag">Docker</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/10/29/pytest-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5/"
                    data-tooltip="pytest 프레임워크 기초 학습"
                    aria-label="PREVIOUS: pytest 프레임워크 기초 학습"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/09/16/Docker-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/"
                    data-tooltip="Docker 기초 학습 정리"
                    aria-label="NEXT: Docker 기초 학습 정리"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://usehun0625.github.io/2019/09/16/Docker-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EA%B0%84-%EB%B3%BC%EB%A5%A8-%EA%B3%B5%EC%9C%A0-%EC%A1%B0%EC%82%AC/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=http://usehun0625.github.io/2019/09/16/Docker-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EA%B0%84-%EB%B3%BC%EB%A5%A8-%EA%B3%B5%EC%9C%A0-%EC%A1%B0%EC%82%AC/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=http://usehun0625.github.io/2019/09/16/Docker-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EA%B0%84-%EB%B3%BC%EB%A5%A8-%EA%B3%B5%EC%9C%A0-%EC%A1%B0%EC%82%AC/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="Table of Contents">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Kevin. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/10/29/pytest-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5/"
                    data-tooltip="pytest 프레임워크 기초 학습"
                    aria-label="PREVIOUS: pytest 프레임워크 기초 학습"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/09/16/Docker-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5-%EC%A0%95%EB%A6%AC/"
                    data-tooltip="Docker 기초 학습 정리"
                    aria-label="NEXT: Docker 기초 학습 정리"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://usehun0625.github.io/2019/09/16/Docker-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EA%B0%84-%EB%B3%BC%EB%A5%A8-%EA%B3%B5%EC%9C%A0-%EC%A1%B0%EC%82%AC/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=http://usehun0625.github.io/2019/09/16/Docker-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EA%B0%84-%EB%B3%BC%EB%A5%A8-%EA%B3%B5%EC%9C%A0-%EC%A1%B0%EC%82%AC/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=http://usehun0625.github.io/2019/09/16/Docker-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EA%B0%84-%EB%B3%BC%EB%A5%A8-%EA%B3%B5%EC%9C%A0-%EC%A1%B0%EC%82%AC/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="Table of Contents">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=http://usehun0625.github.io/2019/09/16/Docker-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EA%B0%84-%EB%B3%BC%EB%A5%A8-%EA%B3%B5%EC%9C%A0-%EC%A1%B0%EC%82%AC/"
                        aria-label="Share on Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=http://usehun0625.github.io/2019/09/16/Docker-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EA%B0%84-%EB%B3%BC%EB%A5%A8-%EA%B3%B5%EC%9C%A0-%EC%A1%B0%EC%82%AC/"
                        aria-label="Share on Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=http://usehun0625.github.io/2019/09/16/Docker-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EA%B0%84-%EB%B3%BC%EB%A5%A8-%EA%B3%B5%EC%9C%A0-%EC%A1%B0%EC%82%AC/"
                        aria-label="Share on Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/beer.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Kevin</h4>
        
            <div id="about-card-bio"><p>Kevin, 이용훈<br>어릴 때부터 코딩에 흥미를 가지고 살아왔습니다. 새로운 기술도 열정적으로 받아들이며 더 좋은 개발을 위하여 학습하고 경험하고 노력하고 있습니다.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Developer, DE</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                서울 / 대한민국
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/curtain.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'http://usehun0625.github.io/2019/09/16/Docker-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EA%B0%84-%EB%B3%BC%EB%A5%A8-%EA%B3%B5%EC%9C%A0-%EC%A1%B0%EC%82%AC/';
              
            this.page.identifier = '2019/09/16/Docker-컨테이너간-볼륨-공유-조사/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'usehun0625';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    




    </body>
</html>
