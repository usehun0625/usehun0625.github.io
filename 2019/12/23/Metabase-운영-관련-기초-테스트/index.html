
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Kevin의 블로그">
    <title>Metabase 운영 관련 기초 테스트 - Kevin의 블로그</title>
    <meta name="author" content="Kevin">
    
    
        <link rel="icon" href="http://usehun0625.github.io/assets/images/beer_favaicon.png">
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kevin","sameAs":["https://github.com/usehun0625/","mailto:usehun0625@gmail.com"],"image":"beer.jpg"},"articleBody":"\n\nMetabase 공식문서를 찾아가며 운영 관련 학습 및 테스트한 내용을 정리한다.\n\n\n\n여기서는 Docker 환경에서 컨테이너로 구동되는 Metabase에 대하여 다루고 있으며, 편의상 Docker 컨테이너 조작 명령은 Docker 컨테이너를 생략하고 표현한다.ex) Metabase 컨테이너 실행 - Metabase 실행\n\n테스트 환경다음과 같은 환경에 학습 및 테스트를 진행하였다.\n\nOS : maxOS Catalina v10.15.1\nDocker : 19.03.5\nMetabase(Docker 이미지) : v0.29.3, v0.32.4, v0.32.5\nMySQL(Docker 이미지) : v5.6\n\n\n\n\nMetabase 에 대한 실습 및 테스트에서는 대부분 v0.32.4를 사용하였다. 다만 버전 업그레이드 테스트에는 v0.29.3과 v0.32.4를 사용하였고, 마이그레이션 테스트에는 v0.32.4의 마이그레이션 버그로 인해 v0.32.5를 사용하였다.\n\nMetabase 실행, 중지, 제거, 재시작Docker Metabase 실행, 중지, 제거, 재시작 방법에 대하여 실습하는 내용 위주로 정리하였다.컨테이너 조작을 편하게 하기 위해서 네이밍(local_metabase)을 사용했지만 컨테이너 ID를 사용하여 조작해도 된다.\n다음과 같은 명령으로 Metabase를 실행한다.\n12$ docker run -d -p 3000:3000 --name local_metabase metabase/metabase:v0.32.4919cbb42a681bdd5974c9d66ddf7f82897f07f3e13367e168fd2463779f99bfa\n\nMetabase가 실행되었는지 확인하기 위하여 다음과 같은 명령으로 Metabase 컨테이너의 상태를 확인한다.\n12$ docker ps -al | grep local_metabase919cbb42a681        metabase/metabase:v0.32.4   \"/app/run_metabase.sh\"   46 seconds ago      Up 45 seconds       0.0.0.0:3000-&gt;3000/tcp   local_metabase\n\n웹 브라우저를 통해 http://localhost:3000 에 접속하면 Metabase가 실행된 것을 확인할 수 있다.Metabase 메인 페이지 스크린샷\n다음과 같은 명령어로 Metabase를 중지한다.\n12$ docker stop local_metabaselocal_metabase\n\n다음과 같은 명령어로 중지된 Metabase를 재시작한다.\n12$ docker restart local_metabaselocal_metabase\n\nDocker에서 Metabase를 제거하기 위해서는 컨테이너가 중지 상태이어야 한다. 다음과 같이 Metabase를 중지하고 Docker에서 제거한다.\n1234$ docker stop local_metabaselocal_metabase$ docker rm local_metabaselocal_metabase\n\n(Optional) Metabase 로그 모니터링은 다음과 같은 Docker 명령으로 할 수 있다.\n12### docker logs -f 컨테이너 ID 혹은 컨테이너 Name$ docker logs -f local_metabase\n\nMetabase 메타데이터 Host OS에 마운트 하기Metabase 메타데이터를 Host OS에 마운트 하기 위해서는 -v 인자로 마운트 정보(Host OS경로, 컨테이너 내부 경로)를 추가하고 Metabase 컨테이너를 실행해야한다.\n테스트를 진행하면서 메타데이터 파일 경로에 대하여 Host OS 마운트 여부 확인을 위해 다음과 같은 사항을 확인한다.\n\nHost OS에 Metabase 메타데이터 파일 생성 여부\nHost OS의 메타데이터 파일을 마운트한 새로운 Metabase 컨테이너 실행시, 기존에 저장했던 메타데이터 존재 여부\n\n테스트는 다음과 같은 순서로 진행된다.\n\n컨테이너 내부 /metabase.db/를 Host OS /tmp/metabase.db/에 마운트하여 Metabase를 실행한다.\nHost OS /tmp/metabase.db/에 메타데이터 파일(metabase.db.mv.db, metabase.db.trace.db) 생성여부를 확인한다.\nMetabase 접속하여 User 계정 생성, Dashboard 생성하고 컨테이너를 제거한다.\n컨테이너 내부 /metabase.db/를 Host OS /tmp/metabase.db/에 마운트하는 새로운 Metabase를 실행한다.\n새로운 Metabase에서 기존에 생성했던 User 계정, Dashboard 존재여부를 확인한다.\n\n컨테이너 내부 /metabase.db/를 Host OS에 마운트하여 Metabase 실행다음과 같이 컨테이너 내부 /metabase.db/를 Host OS /tmp/metabase.db/에 마운트하여 Metabase를 실행한다.\n12$ docker run -d -p 3000:3000 -v /tmp/metabase.db:/metabase.db -e “MB_DB_FILE=/metabase.db” --name host_mount_test_metabase metabase/metabase:v0.32.423e3fe7b2236d52d24f71c4723c31ae2e17fd72c5cc355fc5971dcf9e151d811\n\nHost OS에 메타데이터 파일 생성 확인다음과 같이 마운트된 Host OS 경로(/tmp/metabase.db/)에 Metabase 메타데이터 파일이 생성되었는지 확인한다. 테스트에서는 metabase.db.mv.db, metabase.db.trace.db이 생성된 것을 확인했다.\n123456$ ls -al /tmp/metabase.dbtotal 1088drwxr-xr-x@ 4 kevin  wheel     128 12 11 13:42 .drwxrwxrwt  8 root   wheel     256 12 11 13:48 ..-rw-r--r--@ 1 kevin  wheel  532480 12 11 14:19 metabase.db.mv.db-rw-r--r--@ 1 kevin  wheel     187 12 11 00:01 metabase.db.trace.db\n\nMetabase 접속하여 User 계정 생성, Dashboard 생성한 후 컨테이너 제거http://localhost:3000/에 접속하여 초기 정보를 입력하고 Admin 계정을 생성한다.\n테스트에서는 테스트용 User 계정 2개(test_user1, test_user2)를 생성하였다.유저 생성 스크린샷\n테스트에서는 Sample Dataset-People를 사용하여 Dashboard를 만들었다.대시보드 생성 스크린샷\nMetabase를 중지하고 제거한다.\n1234$ docker stop host_mount_test_metabasehost_mount_test_metabase$ docker rm host_mount_test_metabasehost_mount_test_metabase\n\n컨테이너 내부 /metabase.db/를 Host OS /tmp/metabase.db/에 마운트하는 새로운 Metabase 실행다음과 같은 명령으로 새로운 Metabase를 실행한다. 구분을 위하여 컨테이너 이름(new_host_mount_test_metabase)과 포트(3001)로 변경하였다.\n12$ docker run -d -p 3001:3000 -v /tmp/metabase.db:/metabase.db -e “MB_DB_FILE=/metabase.db” --name new_host_mount_test_metabase metabase/metabase:v0.32.4e502f1a501b660d91948d27220765b79c319aab42f4de157c08a4dff6912e89f\n\n새로운 Metabase에서 기존 생성했던 User 계정, Dashboard 존재여부 확인http://localhost:3001/ 에 접속하여 User 계정 2개(test_user1, test_user2)와 Dashboard를 확인했다.User 계정 존재 유무, Dashboard 존재 유무에 관한 스크린샷은 별도로 첨부하지 않는다.\n\nMetabase에 MySQL Database 등록하기Metabase에 MySQL Database를 등록하고 저장된 데이터에 접근하는 테스트를 진행한다.구체적으로 설명하면 테스트를 위해서 MySQL을 실행하고 Database와 Table을 생성한다. 생성한 Table에 샘플용 데이터를 추가한다.Metabase를 실행하고 MySQL Database를 등록한 뒤,  Database에 저장된 샘플용 데이터를 확인한다.\n다음과 같은 명령으로 MySQL을 실행한다.\n12$ docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=1234 --name mysql_test mysql:5.6df60f464e6ab1c588f38e8e0fca07bdf1557f47c83dfd8d8d3e24e75913d3a9a\n\n다음과 같이 MySQL에 직접 접속하여 Database와 Table을 생성한다. 목적에 부합하지 않아서 MySQL 명령어나 샘플용 데이터 스키마에 대한 설명은 생략한다.\n1234567891011121314$ docker exec -it mysql_test mysql -h 127.0.0.1 -u root -pEnter password : 1234mysql&gt; CREATE DATABASE metabase_test_db;mysql&gt; USE metabase_test_db;mysql&gt; CREATE TABLE metabase_test_table (     event_id INT(20) NOT NULL,    board_id INT(10) NOT NULL,    playtime INT(3) NOT NULL,    minimum_play VARCHAR(10) NOT NULL,    timestamp DATE NOT NULL,    user_id INT(10) NOT NULL,    interest INT(3) NOT NULL,    PRIMARY KEY (event_id))\n\n다음과 같이 샘플용 데이터를 추가하고 MySQL 접속을 종료한다.\n123456mysql&gt; INSERT INTO metabase_test_table VALUES (0, 1000, 1, \"N\", \"2019-12-06T11:00:00Z\", 100, 123);mysql&gt; INSERT INTO metabase_test_table VALUES (1, 1001, 2, \"N\", \"2019-12-06T11:10:00Z\", 100, 123);mysql&gt; INSERT INTO metabase_test_table VALUES (2, 1002, 3, \"N\", \"2019-12-06T11:20:00Z\", 100, 123);mysql&gt; INSERT INTO metabase_test_table VALUES (3, 1003, 3, \"N\", \"2019-12-06T11:30:00Z\", 100, 123);mysql&gt; INSERT INTO metabase_test_table VALUES (4, 1004, 12, \"Y\", \"2019-12-06T11:40:00Z\", 100, 123);mysql&gt; exit;\n\nMetabase에 MySQL Database를 연동하기 위해서 host 주소가 필요한데, 다음과 같은 명령으로 MySQL 컨테이너의 컨테이너 IP를 확인한다.\n12$ docker inspect -f \"&#123;&#123; .NetworkSettings.IPAddress &#125;&#125;\" mysql_test172.17.0.2\n\n다음과 같은 명령으로 Metabase를 실행한다.\n12$ docker run -d -p 3000:3000 --name local_metabase metabase/metabase:v0.32.4a3456fce21680e2fba932edc8cc395adb75d143513f8fe9b831e130b1bf3cfae\n\n웹 브라우저로 http://localhost:3000/ 에 접속하여 초기 정보를 입력하고 Admin 계정을 생성한다.메인 페이지에서 다음과 같은 순서로 Database 추가 페이지로 이동한다.\n\n메인 페이지 우측 상단 톱니모양 버튼(Setting) 클릭 &gt;&gt; Dropdown 메뉴중 ADMIN 클릭 &gt;&gt; 페이지 상단 메뉴중  DATABASE 클릭 &gt;&gt; 우측 상단 ADD DATABASE 클릭\n\nDatabase 추가 페이지에서 아래와 같은 MySQL에 관한 정보를 입력하여 Metabase에 MySQL Database를 등록한다.\n\nMySQL에 관한 정보\n\n\nKey\nValue\n\n\n\nDatabase type\nMySQL\n\n\nName\nmetabase_test_db_mysql\n\n\nHost\n172.17.0.2\n\n\nPort\n3306\n\n\nDatabase name\nmetabase_test_db\n\n\nDatabase username\nroot\n\n\nDatabase password\n1234\n\n\n\n\nMetabase에 등록된 MySQL Database에 정상적으로 접근하여 사용할수 있는지 확인하기 위해서 앞서 생성한 metabase_test_table 테이블을 조회하는 Question을 생성해본다.다음과 같은 순서로 Metabase의  Question 생성 페이지로 이동한다.\n\nMetabase 메인 페이지 우측 상단 ASK A QUESTION 클릭 &gt;&gt; 우측 NATIVE QUERY 클릭\n\n좌측 상단 Database Select Box에서 “metabase_test_db_mysql”을 선택하고, 다음과 같은 쿼리문을 실행한다.\n1select * from metabase_test_table;\n\n쿼리문을 실행하면 페이지 하단에서 다음과 같은 결과 Table을 확인할 수 있다.테이블 확인 스크린샷\n\nMetabase 메타데이터 마이그레이션 테스트 : H2 → MySQL\n이 테스트는 Metabase v0.32.4 - 마이그레이션 버그로 인해서 v0.32.5로 진행하였다. 다음은 관련 github 링크이다.\n\nhttps://github.com/metabase/metabase/issues/9756\n\n해당 링크의 에러 케이스는 Linux Bionic에서 발생한 케이스지만, 실제로 macOS에서 마이그레이션을 시도해본 결과 동일한 포인트에서 에러가 발생했다.따라서 테스트는 v0.32.5에서 진행한다.\n\n이 테스트는 다음과 같은 Metabase 공식 문서를 참고하여 진행하였다.\n\nv0.32.5 / Operations-Guide / Running Metabase on Docker : Migrating from H2 to Postgres as the Metabase application database\n\n공식 문서는 H2 → Postgre 마이그레이션 방법에 설명하고 있지만, 몇 가지 설정만 변경하면 H2 → MySQL 마이그레이션도 가능하다.H2 → MySQL 마이그레이션을 하는 방법은 Metabase 실행시 Source(H2 Database)에 대한 정보와 Target(MySQL)에 대한 정보, load-from-h2 인자를 추가해주면 된다.Metabase Migration 컨테이너를 실행하면 기존 H2에 저장된 메타 데이터를 불러와 MySQL에 저장하고 컨테이너는 중지 상태가 된다.마이그레이션 확인을 위해서는 MySQL에 대한 정보를 인자로 추가하여 Metabase를 실행한다.\n편의를 위해 다음과 같은 용어를 사용한다.\n\nMetabase H2 : Metabase의 메타데이터 저장소로 H2를 사용하는 방식의 Metabase Docker 컨테이너\nMetabase Migration : H2로 저장된 Metabase의 메타데이터를 MySQL에 저장하는 처리를 위한 Metabase Docker 컨테이너 (Source(H2 Database)에 대한 정보, Target(MySQL)에 대한 정보, load-from-h2 인자 를 사용하여 실행)\nMetabase MySQL : Metabase의 메타데이터 저장소로 MySQL을 사용하는 방식의 Metabase Docker 컨테이너 (MySQL에 대한 접근 정보 인자를 사용하여 실행)\nMySQL : Docker MySQL 컨테이너, Metabase 메타데이터 저장소로 사용할 MySQL 컨테이너.\n\n마이그레이션 테스트는 다음과 같이 진행한다.\n\nMetabase H2 실행하여 메타 데이터 저장하고 중지하기\nMetabase H2 실행\nMetabase에 접속하여 Dashboard 만들기\nMetabase H2 컨테이너 중지\n\n\n메타데이터 마이그레이션 진행\nMySQL 실행 및 데이터 베이스 생성\nSource(H2 Database)에 대한 정보, Target(MySQL)에 대한 정보, load-from-h2 옵션 추가하여 Metabase Migration 실행\n\n\n마이그레이션된 메타데이터 확인\nMySQL에 대한 정보를 옵션으로 추가하여 Metabase MySQL 실행\nMetabase에 접속하여 Dashboard 존재여부 확인\n\n\n\nMetabase H2 실행하여 메타 데이터 저장하고 중지하기Metabase 메타 데이터가 Host OS에 매핑되도록 다음과 같이 Metabase H2를 실행한다.\n12$ docker run -d -p 3000:3000 -v /tmp/metabase.db:/metabase.db -e \"MB_DB_FILE=/metabase.db\" --name h2_metabase metabase/metabase:v0.32.522a4d9b85c1daa9ee481274537cc4ed4d47e75ed5351d53fe858e4a4c26e0bbf\n\n이 테스트에서는 Metabase에서 기본적으로 제공해주는 Sample Dataset으로 Dashboard를 만든다.웹 브라우저로 Metabase http://localhost:3000 에 접속하여 초기정보(Admin 계정 생성)를 입력하고 Metabase 메인페이지로 이동한다.\nSample Dataset - PRODUCT를 활용하여 다음과 같은 Dashboard를 만든다. Dashboard를 생성방법은 문서 목적에 부합되지 않아 별도로 설명하지 않는다.\n\n대시보드 생성 스크린샷\n\n다음과 같은 명령으로 Metabase H2 컨테이너를 중지한다.\n12$ docker stop h2_metabaseh2_metabase\n\n메타데이터 마이그레이션 진행다음과 같은 명령으로 Metabase의 메타데이터를 저장할 MySQL 컨테이너를 실행한다.\n12$ docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=1234 --name mysql_for_metabase_metadata mysql:5.6bdcbba95ca008415fa6b53e3aedc448a51d6bacdf0c765c372381d1efc54e1f9\n\n\n다음과 같은 명령으로 MySQL에 직접 접속하여 Metabase 메타데이터를 저장할 Database를 생성한다.\n1234$ docker exec -it mysql_for_metabase_metadata mysql -h 127.0.0.1 -u root -pEnter password : 1234mysql&gt; CREATE DATABASE metabase_metadata;mysql&gt; exit;\n\nMetabase MySQL 컨테이너를 실행하기에 앞서 다음과 같은 명령으로 Target(MySQL)에 대한 정보 - MySQL 컨테이너 IP를 확인한다.\n12$ docker inspect -f \"&#123;&#123; .NetworkSettings.IPAddress &#125;&#125;\" mysql_for_metabase_metadata172.17.0.2\n\n\n다음과 같이 Source(H2 Database)에 대한 정보, Target(MySQL)에 대한 정보, load-from-h2 인자를 추가하여 Metabase Migration을 실행한다. Metabase H2 컨테이너와 구분하기 위하여 포트번호를 3001로 변경하였다.\n1234567891011$ docker run -d -p 3001:3000\\    -v /tmp/metabase.db:/metabase.db \\    -e \"MB_DB_FILE=/metabase.db\" \\    -e \"MB_DB_TYPE=mysql\" \\    -e \"MB_DB_DBNAME=metabase_metadata\" \\    -e \"MB_DB_PORT=3306\" \\    -e \"MB_DB_USER=root\" \\    -e \"MB_DB_PASS=1234\" \\    -e \"MB_DB_HOST=172.17.0.2\" \\--name migration_metabase metabase/metabase:v0.32.5 load-from-h2b42028059268ca3381c5f288f1053e2d667b595837d3a67afe5161b2387b1baa\n\nMetabase migration은 H2 → MySQL 마이그레이션 완료되면 컨테이너가 중지 상태가 된다.\n마이그레이션된 메타데이터 확인메타데이터를 저장한 MySQL에 대한 접근 정보를 인자로 추가하여 Metabase를 실행한다.Metabase에 접속하여 기존에 생성한 Dashborad 존재 유무에 따라 마이그레이션 성공 유무를 판단할 수 있다.\n다음과 같은 명령으로 MySQL에 대한 정보를 인자로 추가하여 Metabase MySQL을 실행한다. 구분을 위해 3002번 포트를 사용한다.\n123456789$ docker run -d -p 3002:3000\\    -e \"MB_DB_TYPE=mysql\" \\    -e \"MB_DB_DBNAME=metabase_metadata\" \\    -e \"MB_DB_PORT=3306\" \\    -e \"MB_DB_USER=root\" \\    -e \"MB_DB_PASS=1234\" \\    -e \"MB_DB_HOST=172.17.0.2\" \\--name mysql_metabase metabase/metabase:v0.32.5cb2cbadaf590634d072638c89717062ae7fc7efaca219f95ef0c9c6b84225074\n\nhttp://localhost:3002/ 에 접속하여 기존에 만든 Dashboard가 존재하는지 확인한다.테스트에서는 기존에 만들었던 Dashboard가 존재하는 것을 확인하였다. 즉 메타데이터 마이그레이션이 정상적으로 처리되었다고 볼 수 있다\n\n버전 업그레이드 : MySQL에 Metabase 메타데이터를 저장하는 방식에서 v0.29.3 → v0.32.4 버전 업그레이드이 테스트는 메타데이터를 MySQL에 저장하는 Metabase의 버전 업그레이드(v0.29.3 → v0.32.4)에 대한 내용을 다룬다.\n메타데이터 저장소를 MySQL로 설정한 Metabase v0.29.3을 실행한다.Metabase에 접속하여 버전 확인하고 메타데이터 생성을 위하여 User 계정 생성과 Dashboard 생성한다.메타데이터 생성(User 계정 생성, Dashborad 생성) 하는 이유는 상위 버전(v0.32.4)에서 하위 버전(v0.29.3)이 호환 되는지 확인하기 위해서이다.Metabase v0.29.3을 중지하고 메타데이터 저장소로 MySQL로 설정하여 Metabase v0.32.4를 실행한다.\n테스트는 다음과 같은 순서로 진행한다.\n\nMySQL v5.6 실행 및 메타데이터를 저장할 Database 생성\nMySQL을 메타데이터 저장소로 사용하는 설정으로 Metabase v0.29.3 실행\nMetabase에 접속하여 Metabase 버전(v0.29.3) 확인 및  User 계정, Dashboard 생성\nMetabase v0.29.3 중지\nMySQL을 메타데이터 저장소로 사용하는 설정으로 Metabase v0.32.4 실행\nMetabase에 접속하여 Metabase 버전 확인 - v0.32.4, v0.29.3에서 생성한 User 계정 존재유무, Dashboard 존재유무 확인\n\nMySQL v5.6 실행 및 메타 데이터를 저장할 Database 생성다음과 같은 명령으로 MySQL v5.6을 실행한다.\n12$ docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=1234 --name mysql_metabase_metadata mysql:5.643a31f157ef087fde741b49358d9d793508dfa94eb92c61ff2cc1293fdc172eb\n\nMySQL v5.6에 접속하여 메타데이터를 저장할 Database(metbase_metadata)를 생성한다.\n1234$ docker exec -it mysql_metabase_metadata mysql -h 127.0.0.1 -u root -pEnter password : 1234mysql&gt; CREATE DATABASE metabase_metadata;mysql&gt; exit;\n\nMySQL을 메타데이터 저장소로 사용하는 설정으로 Metabase v0.29.3 실행MySQL의 Host 주소를 확인하기 위해서 다음과 같은 명령으로 컨테이너 IP를 확인한다.\n12$ docker inspect -f \"&#123;&#123; .NetworkSettings.IPAddress &#125;&#125;\" mysql_metabase_metadata172.17.0.2\n\n다음과 같이 메타데이터를 저장할 MySQL에 대한 정보를 인자로 추가하여 Metabase v0.29.3을 실행한다. MySQL에 대한 정보는 URI 형태의 인자로 추가 하였다.\n12$ docker run -d -p 3000:3000 --name metabase_v293 -e \"MB_DB_CONNECTION_URI=mysql://172.17.0.2:3306/metabase_metadata?user=root&amp;password=1234\" metabase/metabase:v0.29.31f123b30d49a027a748598aa693c1e52c50e9cc38bcc36cef6218db5a2663987\n\nMetabase에 접속하여 Metabase 버전(v0.29.3)  확인 및 일반 User계정, Dashboard 생성http://localhost:3000 에 접속하여 초기 정보를 입력하고 Admin 계정을 생성한다.다음과 같은 순서로 Metabase 버전(v0.29.3)을 확인한다.\n\n메인 페이지 우측 상단 “Admin 계정 원형 버튼” 클릭 &gt;&gt; Dropdown 메뉴중 ABOUT METABASE 클릭\nMetabase 버전 v0.29.3 확인 스크린샷\n\nUser 계정 생성과 관련된 자세한 설명은 문서목적에 부합하지 않아서 생략한다.User 계정 목록을 확인하기 위해 다음과 같은 순서로 User 계정 목록 페이지로 이동한다.\n\n메인 페이지 우측 상단 “Admin 계정 원형 버튼” 클릭 &gt;&gt; Dropdown 메뉴중 ADMIN PANEL 클릭 &gt;&gt; 상단 메뉴중 ADMIN PANEL 클릭\n\n다음은 테스트 진행하며 User 계정 목록을 확인하는 Metabase 페이지 스크린 샷이다.\n\nUser 계정 목록을 확인하는 Metabase 페이지 스크린 샷\n\n테스트에서는 Sample Dataset - Reviews를 사용하여 Dashboard를 생성하였다. Dashboard 생성에 관한 내용은 별도의 설명을 생략한다.\n\nSample Dataset - Reviews를 사용하여 생성한 Dashboard 스크린샷\n\nMetabase v0.29.3 중지업그레이드를 위해서 실행중인 Metabase v0.29.3을 중지한다.\n12$ docker stop metabase_v293metabase_v293\n\nMySQL을 메타데이터 저장소로 사용하는 설정으로 Metabase v0.32.4 실행다음과 같이 메타데이터를 저장할 MySQL에 대한 정보를 인자로 추가하여 Metabase v0.32.4를 실행한다. 구분을 위하여 3001 포트를 사용한다.\n12$ docker run -d -p 3001:3000 --name metabase_v324 -e \"MB_DB_CONNECTION_URI=mysql://172.17.0.2:3306/metabase_metadata?user=root&amp;password=1234\" metabase/metabase:v0.32.49a5ae4de2f87c3ed0418c0c9a35c6da507c1bf9b4dde1ed90e594296e34f86d7\n\nMetabase에 접속하여 Metabase 버전 확인 - v0.32.4, v0.29.3에서 생성한 일반 User계정 존재유무, Dashboard 존재유무 확인http://localhost:3001 에 접속하여 Admin 계정에 로그인 한다.\n다음과 같은 순서로 업그레이드한 Metabase 버전(v0.32.4)을 확인한다.\n\n메인페이지 우측 상단 “톱니바퀴 버튼(Settings)” 클릭 &gt;&gt; Dropdown 메뉴중 ABOUT METABASE 클릭\nMetabase 버전 v0.32.4 확인 스크린샷\n\n다음과 같은 순서로 User계정 목록 페이지로 이동할 수 있으며 해당 페이지에서 User 계정 목록을 확인할 수 있다.\n\n메인페이지 우측 상단 “톱니바퀴 버튼(Settings)” 클릭 &gt;&gt; Dropdown 메뉴중 ADMIN 클릭 &gt;&gt; 페이지 상단 메뉴중 PEOPLE 클릭 \n\n별도로 Collection을 생성하여 Dashboard를 만들지 않았다면 Our analytics에서 v0.29.3에서 생성한 Dashboard를 확인할 수 있다.Our analytics는 Metabase 메인페이지 상단의 START HERE에서 링크로 연결되어 있다.테스트에서는 v0.29.3에서 생성했던 User 계정 목록과 Dashboard도 존재하는 것을 확인했다.\n\nMySQL 8.x 버전 사용시 Metabase와 연동 오류 원인과 해결방법MySQL 8.0이상의 버전을 사용 할 경우 Metabase와 연동 오류가 발생한다.오류 메시지는 다음과 같다. \n1java.sql.SQLException: Unable to load authentication plugin 'caching_sha2_password'.\n\n발생하는 원인은 다음과 같다. \n\nMySQL 8.0 이상 버전은 MySQL 서버의 기본 인증 플러그인을 mysql_native_password에서 caching_sha2_password로 변경했다.\nMetabase(v.0.32)는 MariaDB Connector/J를 사용하고 있으며 MariaDB 공식 사이트를 보면 현재(2019.12.23)기준으로 caching_sha2_password를 지원하지 않는다고 명시되어 있다.\n\n따라서, MySQL에 접속하는 User의 인증 방식을 mysql_native_password으로 변경해야 되며 방법은 다음과 같다. 아래의 방법은 root 유저를 기준으로 작성되었으며 각 각 상황에 맞게 변경한다. \n1ALTER USER root@‘%’ IDENTIFIED WITH mysql_native_password BY ‘1234’;\n\n참고 링크는 다음과 같다.\n\nhttps://github.com/metabase/metabase/issues/9572\n\n","dateCreated":"2019-12-23T10:16:35+09:00","dateModified":"2020-02-15T12:47:18+09:00","datePublished":"2019-12-23T10:16:35+09:00","description":"\n\nMetabase 공식문서를 찾아가며 운영 관련 학습 및 테스트한 내용을 정리한다.","headline":"Metabase 운영 관련 기초 테스트","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"http://usehun0625.github.io/2019/12/23/Metabase-%EC%9A%B4%EC%98%81-%EA%B4%80%EB%A0%A8-%EA%B8%B0%EC%B4%88-%ED%85%8C%EC%8A%A4%ED%8A%B8/"},"publisher":{"@type":"Organization","name":"Kevin","sameAs":["https://github.com/usehun0625/","mailto:usehun0625@gmail.com"],"image":"beer.jpg","logo":{"@type":"ImageObject","url":"beer.jpg"}},"url":"http://usehun0625.github.io/2019/12/23/Metabase-%EC%9A%B4%EC%98%81-%EA%B4%80%EB%A0%A8-%EA%B8%B0%EC%B4%88-%ED%85%8C%EC%8A%A4%ED%8A%B8/","keywords":"Docker, Metabase"}</script>
    <meta name="description" content="Metabase 공식문서를 찾아가며 운영 관련 학습 및 테스트한 내용을 정리한다.">
<meta property="og:type" content="blog">
<meta property="og:title" content="Metabase 운영 관련 기초 테스트">
<meta property="og:url" content="http://usehun0625.github.io/2019/12/23/Metabase-%EC%9A%B4%EC%98%81-%EA%B4%80%EB%A0%A8-%EA%B8%B0%EC%B4%88-%ED%85%8C%EC%8A%A4%ED%8A%B8/index.html">
<meta property="og:site_name" content="Kevin의 블로그">
<meta property="og:description" content="Metabase 공식문서를 찾아가며 운영 관련 학습 및 테스트한 내용을 정리한다.">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2019-12-23T01:16:35.000Z">
<meta property="article:modified_time" content="2020-02-15T03:47:18.048Z">
<meta property="article:author" content="Kevin">
<meta property="article:tag" content="Docker">
<meta property="article:tag" content="Metabase">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="http://usehun0625.github.io/assets/images/beer.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Kevin의 블로그
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/beer.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/beer.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Kevin</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Kevin, 이용훈<br>어릴 때부터 코딩에 흥미를 가지고 살아왔습니다. 새로운 기술도 열정적으로 받아들이며 더 좋은 개발을 위하여 학습하고 경험하고 노력하고 있습니다.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/"
                            title="홈"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">홈</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="카테고리"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="태그"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="/all-archives"
                            
                            title="아카이브"
                        >
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/usehun0625/" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:usehun0625@gmail.com" target="_blank" rel="noopener" title="Mail">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Metabase 운영 관련 기초 테스트
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2019-12-23T10:16:35+09:00">
	
		    Dec 23, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C/">대시보드</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h1 id="table-of-contents">Table of Contents</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#테스트-환경"><span class="toc-text">테스트 환경</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Metabase-실행-중지-제거-재시작"><span class="toc-text">Metabase 실행, 중지, 제거, 재시작</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Metabase-메타데이터-Host-OS에-마운트-하기"><span class="toc-text">Metabase 메타데이터 Host OS에 마운트 하기</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#컨테이너-내부-metabase-db-를-Host-OS에-마운트하여-Metabase-실행"><span class="toc-text">컨테이너 내부 &#x2F;metabase.db&#x2F;를 Host OS에 마운트하여 Metabase 실행</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Host-OS에-메타데이터-파일-생성-확인"><span class="toc-text">Host OS에 메타데이터 파일 생성 확인</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Metabase-접속하여-User-계정-생성-Dashboard-생성한-후-컨테이너-제거"><span class="toc-text">Metabase 접속하여 User 계정 생성, Dashboard 생성한 후 컨테이너 제거</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#컨테이너-내부-metabase-db-를-Host-OS-tmp-metabase-db-에-마운트하는-새로운-Metabase-실행"><span class="toc-text">컨테이너 내부 &#x2F;metabase.db&#x2F;를 Host OS &#x2F;tmp&#x2F;metabase.db&#x2F;에 마운트하는 새로운 Metabase 실행</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#새로운-Metabase에서-기존-생성했던-User-계정-Dashboard-존재여부-확인"><span class="toc-text">새로운 Metabase에서 기존 생성했던 User 계정, Dashboard 존재여부 확인</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Metabase에-MySQL-Database-등록하기"><span class="toc-text">Metabase에 MySQL Database 등록하기</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Metabase-메타데이터-마이그레이션-테스트-H2-→-MySQL"><span class="toc-text">Metabase 메타데이터 마이그레이션 테스트 : H2 → MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Metabase-H2-실행하여-메타-데이터-저장하고-중지하기"><span class="toc-text">Metabase H2 실행하여 메타 데이터 저장하고 중지하기</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#메타데이터-마이그레이션-진행"><span class="toc-text">메타데이터 마이그레이션 진행</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#마이그레이션된-메타데이터-확인"><span class="toc-text">마이그레이션된 메타데이터 확인</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#버전-업그레이드-MySQL에-Metabase-메타데이터를-저장하는-방식에서-v0-29-3-→-v0-32-4-버전-업그레이드"><span class="toc-text">버전 업그레이드 : MySQL에 Metabase 메타데이터를 저장하는 방식에서 v0.29.3 → v0.32.4 버전 업그레이드</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-v5-6-실행-및-메타-데이터를-저장할-Database-생성"><span class="toc-text">MySQL v5.6 실행 및 메타 데이터를 저장할 Database 생성</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL을-메타데이터-저장소로-사용하는-설정으로-Metabase-v0-29-3-실행"><span class="toc-text">MySQL을 메타데이터 저장소로 사용하는 설정으로 Metabase v0.29.3 실행</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Metabase에-접속하여-Metabase-버전-v0-29-3-확인-및-일반-User계정-Dashboard-생성"><span class="toc-text">Metabase에 접속하여 Metabase 버전(v0.29.3)  확인 및 일반 User계정, Dashboard 생성</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Metabase-v0-29-3-중지"><span class="toc-text">Metabase v0.29.3 중지</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL을-메타데이터-저장소로-사용하는-설정으로-Metabase-v0-32-4-실행"><span class="toc-text">MySQL을 메타데이터 저장소로 사용하는 설정으로 Metabase v0.32.4 실행</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Metabase에-접속하여-Metabase-버전-확인-v0-32-4-v0-29-3에서-생성한-일반-User계정-존재유무-Dashboard-존재유무-확인"><span class="toc-text">Metabase에 접속하여 Metabase 버전 확인 - v0.32.4, v0.29.3에서 생성한 일반 User계정 존재유무, Dashboard 존재유무 확인</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL-8-x-버전-사용시-Metabase와-연동-오류-원인과-해결방법"><span class="toc-text">MySQL 8.x 버전 사용시 Metabase와 연동 오류 원인과 해결방법</span></a></li></ol>

<p>Metabase 공식문서를 찾아가며 운영 관련 학습 및 테스트한 내용을 정리한다.</p>
<a id="more"></a>

<blockquote>
<p>여기서는 Docker 환경에서 컨테이너로 구동되는 Metabase에 대하여 다루고 있으며, 편의상 Docker 컨테이너 조작 명령은 Docker 컨테이너를 생략하고 표현한다.<br>ex) Metabase 컨테이너 실행 - Metabase 실행</p>
</blockquote>
<h1 id="테스트-환경"><a href="#테스트-환경" class="headerlink" title="테스트 환경"></a>테스트 환경</h1><p>다음과 같은 환경에 학습 및 테스트를 진행하였다.</p>
<ul>
<li>OS : maxOS Catalina v10.15.1</li>
<li>Docker : 19.03.5<ul>
<li>Metabase(Docker 이미지) : v0.29.3, v0.32.4, v0.32.5</li>
<li>MySQL(Docker 이미지) : v5.6</li>
</ul>
</li>
</ul>
<blockquote>
<p>Metabase 에 대한 실습 및 테스트에서는 대부분 v0.32.4를 사용하였다.<br> 다만 버전 업그레이드 테스트에는 v0.29.3과 v0.32.4를 사용하였고,<br> 마이그레이션 테스트에는 v0.32.4의 마이그레이션 버그로 인해 v0.32.5를 사용하였다.</p>
</blockquote>
<h1 id="Metabase-실행-중지-제거-재시작"><a href="#Metabase-실행-중지-제거-재시작" class="headerlink" title="Metabase 실행, 중지, 제거, 재시작"></a>Metabase 실행, 중지, 제거, 재시작</h1><p>Docker Metabase 실행, 중지, 제거, 재시작 방법에 대하여 실습하는 내용 위주로 정리하였다.<br>컨테이너 조작을 편하게 하기 위해서 네이밍(local_metabase)을 사용했지만 컨테이너 ID를 사용하여 조작해도 된다.</p>
<p>다음과 같은 명령으로 Metabase를 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 3000:3000 --name local_metabase metabase/metabase:v0.32.4</span><br><span class="line">919cbb42a681bdd5974c9d66ddf7f82897f07f3e13367e168fd2463779f99bfa</span><br></pre></td></tr></table></figure>

<p>Metabase가 실행되었는지 확인하기 위하여 다음과 같은 명령으로 Metabase 컨테이너의 상태를 확인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker ps -al | grep local_metabase</span><br><span class="line">919cbb42a681        metabase/metabase:v0.32.4   <span class="string">"/app/run_metabase.sh"</span>   46 seconds ago      Up 45 seconds       0.0.0.0:3000-&gt;3000/tcp   local_metabase</span><br></pre></td></tr></table></figure>

<p>웹 브라우저를 통해 <a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a> 에 접속하면 Metabase가 실행된 것을 확인할 수 있다.<br><a href="/post_attachment/Metabase-운영-관련-기초-테스트/Metabase_첫_화면.png" target="_blank">Metabase 메인 페이지 스크린샷</a></p>
<p>다음과 같은 명령어로 Metabase를 중지한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker stop local_metabase</span><br><span class="line">local_metabase</span><br></pre></td></tr></table></figure>

<p>다음과 같은 명령어로 중지된 Metabase를 재시작한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker restart local_metabase</span><br><span class="line">local_metabase</span><br></pre></td></tr></table></figure>

<p>Docker에서 Metabase를 제거하기 위해서는 컨테이너가 중지 상태이어야 한다. 다음과 같이 Metabase를 중지하고 Docker에서 제거한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker stop local_metabase</span><br><span class="line">local_metabase</span><br><span class="line">$ docker rm local_metabase</span><br><span class="line">local_metabase</span><br></pre></td></tr></table></figure>

<p>(Optional) Metabase 로그 모니터링은 다음과 같은 Docker 명령으로 할 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### docker logs -f 컨테이너 ID 혹은 컨테이너 Name</span></span><br><span class="line">$ docker logs -f local_metabase</span><br></pre></td></tr></table></figure>

<h1 id="Metabase-메타데이터-Host-OS에-마운트-하기"><a href="#Metabase-메타데이터-Host-OS에-마운트-하기" class="headerlink" title="Metabase 메타데이터 Host OS에 마운트 하기"></a>Metabase 메타데이터 Host OS에 마운트 하기</h1><p>Metabase 메타데이터를 Host OS에 마운트 하기 위해서는 -v 인자로 마운트 정보(Host OS경로, 컨테이너 내부 경로)를 추가하고 Metabase 컨테이너를 실행해야한다.</p>
<p>테스트를 진행하면서 메타데이터 파일 경로에 대하여 Host OS 마운트 여부 확인을 위해 다음과 같은 사항을 확인한다.</p>
<ul>
<li>Host OS에 Metabase 메타데이터 파일 생성 여부</li>
<li>Host OS의 메타데이터 파일을 마운트한 새로운 Metabase 컨테이너 실행시, 기존에 저장했던 메타데이터 존재 여부</li>
</ul>
<p>테스트는 다음과 같은 순서로 진행된다.</p>
<ol>
<li>컨테이너 내부 /metabase.db/를 Host OS /tmp/metabase.db/에 마운트하여 Metabase를 실행한다.</li>
<li>Host OS /tmp/metabase.db/에 메타데이터 파일(metabase.db.mv.db, metabase.db.trace.db) 생성여부를 확인한다.</li>
<li>Metabase 접속하여 User 계정 생성, Dashboard 생성하고 컨테이너를 제거한다.</li>
<li>컨테이너 내부 /metabase.db/를 Host OS /tmp/metabase.db/에 마운트하는 새로운 Metabase를 실행한다.</li>
<li>새로운 Metabase에서 기존에 생성했던 User 계정, Dashboard 존재여부를 확인한다.</li>
</ol>
<h2 id="컨테이너-내부-metabase-db-를-Host-OS에-마운트하여-Metabase-실행"><a href="#컨테이너-내부-metabase-db-를-Host-OS에-마운트하여-Metabase-실행" class="headerlink" title="컨테이너 내부 /metabase.db/를 Host OS에 마운트하여 Metabase 실행"></a>컨테이너 내부 /metabase.db/를 Host OS에 마운트하여 Metabase 실행</h2><p>다음과 같이 컨테이너 내부 /metabase.db/를 Host OS /tmp/metabase.db/에 마운트하여 Metabase를 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 3000:3000 -v /tmp/metabase.db:/metabase.db -e “MB_DB_FILE=/metabase.db” --name host_mount_test_metabase metabase/metabase:v0.32.4</span><br><span class="line">23e3fe7b2236d52d24f71c4723c31ae2e17fd72c5cc355fc5971dcf9e151d811</span><br></pre></td></tr></table></figure>

<h2 id="Host-OS에-메타데이터-파일-생성-확인"><a href="#Host-OS에-메타데이터-파일-생성-확인" class="headerlink" title="Host OS에 메타데이터 파일 생성 확인"></a>Host OS에 메타데이터 파일 생성 확인</h2><p>다음과 같이 마운트된 Host OS 경로(/tmp/metabase.db/)에 Metabase 메타데이터 파일이 생성되었는지 확인한다. 테스트에서는 metabase.db.mv.db, metabase.db.trace.db이 생성된 것을 확인했다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ls -al /tmp/metabase.db</span><br><span class="line">total 1088</span><br><span class="line">drwxr-xr-x@ 4 kevin  wheel     128 12 11 13:42 .</span><br><span class="line">drwxrwxrwt  8 root   wheel     256 12 11 13:48 ..</span><br><span class="line">-rw-r--r--@ 1 kevin  wheel  532480 12 11 14:19 metabase.db.mv.db</span><br><span class="line">-rw-r--r--@ 1 kevin  wheel     187 12 11 00:01 metabase.db.trace.db</span><br></pre></td></tr></table></figure>

<h2 id="Metabase-접속하여-User-계정-생성-Dashboard-생성한-후-컨테이너-제거"><a href="#Metabase-접속하여-User-계정-생성-Dashboard-생성한-후-컨테이너-제거" class="headerlink" title="Metabase 접속하여 User 계정 생성, Dashboard 생성한 후 컨테이너 제거"></a>Metabase 접속하여 User 계정 생성, Dashboard 생성한 후 컨테이너 제거</h2><p><a href="http://localhost:3000/" target="_blank" rel="noopener">http://localhost:3000/</a>에 접속하여 초기 정보를 입력하고 Admin 계정을 생성한다.</p>
<p>테스트에서는 테스트용 User 계정 2개(test_user1, test_user2)를 생성하였다.<br><a href="/post_attachment/Metabase-운영-관련-기초-테스트/HostOS_1_Test_User.png" target="_blank">유저 생성 스크린샷</a></p>
<p>테스트에서는 Sample Dataset-People를 사용하여 Dashboard를 만들었다.<br><a href="/post_attachment/Metabase-운영-관련-기초-테스트/HostOS_2_Dashboard.png" target="_blank">대시보드 생성 스크린샷</a></p>
<p>Metabase를 중지하고 제거한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker stop host_mount_test_metabase</span><br><span class="line">host_mount_test_metabase</span><br><span class="line">$ docker rm host_mount_test_metabase</span><br><span class="line">host_mount_test_metabase</span><br></pre></td></tr></table></figure>

<h2 id="컨테이너-내부-metabase-db-를-Host-OS-tmp-metabase-db-에-마운트하는-새로운-Metabase-실행"><a href="#컨테이너-내부-metabase-db-를-Host-OS-tmp-metabase-db-에-마운트하는-새로운-Metabase-실행" class="headerlink" title="컨테이너 내부 /metabase.db/를 Host OS /tmp/metabase.db/에 마운트하는 새로운 Metabase 실행"></a>컨테이너 내부 /metabase.db/를 Host OS /tmp/metabase.db/에 마운트하는 새로운 Metabase 실행</h2><p>다음과 같은 명령으로 새로운 Metabase를 실행한다. 구분을 위하여 컨테이너 이름(new_host_mount_test_metabase)과 포트(3001)로 변경하였다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 3001:3000 -v /tmp/metabase.db:/metabase.db -e “MB_DB_FILE=/metabase.db” --name new_host_mount_test_metabase metabase/metabase:v0.32.4</span><br><span class="line">e502f1a501b660d91948d27220765b79c319aab42f4de157c08a4dff6912e89f</span><br></pre></td></tr></table></figure>

<h2 id="새로운-Metabase에서-기존-생성했던-User-계정-Dashboard-존재여부-확인"><a href="#새로운-Metabase에서-기존-생성했던-User-계정-Dashboard-존재여부-확인" class="headerlink" title="새로운 Metabase에서 기존 생성했던 User 계정, Dashboard 존재여부 확인"></a>새로운 Metabase에서 기존 생성했던 User 계정, Dashboard 존재여부 확인</h2><p><a href="http://localhost:3001/" target="_blank" rel="noopener">http://localhost:3001/</a> 에 접속하여 User 계정 2개(test_user1, test_user2)와 Dashboard를 확인했다.<br>User 계정 존재 유무, Dashboard 존재 유무에 관한 스크린샷은 별도로 첨부하지 않는다.</p>
<hr>
<h1 id="Metabase에-MySQL-Database-등록하기"><a href="#Metabase에-MySQL-Database-등록하기" class="headerlink" title="Metabase에 MySQL Database 등록하기"></a>Metabase에 MySQL Database 등록하기</h1><p>Metabase에 MySQL Database를 등록하고 저장된 데이터에 접근하는 테스트를 진행한다.<br>구체적으로 설명하면 테스트를 위해서 MySQL을 실행하고 Database와 Table을 생성한다. 생성한 Table에 샘플용 데이터를 추가한다.<br>Metabase를 실행하고 MySQL Database를 등록한 뒤,  Database에 저장된 샘플용 데이터를 확인한다.</p>
<p>다음과 같은 명령으로 MySQL을 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=1234 --name mysql_test mysql:5.6</span><br><span class="line">df60f464e6ab1c588f38e8e0fca07bdf1557f47c83dfd8d8d3e24e75913d3a9a</span><br></pre></td></tr></table></figure>

<p>다음과 같이 MySQL에 직접 접속하여 Database와 Table을 생성한다. 목적에 부합하지 않아서 MySQL 명령어나 샘플용 데이터 스키마에 대한 설명은 생략한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">exec</span> -it mysql_test mysql -h 127.0.0.1 -u root -p</span><br><span class="line">Enter password : 1234</span><br><span class="line">mysql&gt; CREATE DATABASE metabase_test_db;</span><br><span class="line">mysql&gt; USE metabase_test_db;</span><br><span class="line">mysql&gt; CREATE TABLE metabase_test_table ( </span><br><span class="line">    event_id INT(20) NOT NULL,</span><br><span class="line">    board_id INT(10) NOT NULL,</span><br><span class="line">    playtime INT(3) NOT NULL,</span><br><span class="line">    minimum_play VARCHAR(10) NOT NULL,</span><br><span class="line">    timestamp DATE NOT NULL,</span><br><span class="line">    user_id INT(10) NOT NULL,</span><br><span class="line">    interest INT(3) NOT NULL,</span><br><span class="line">    PRIMARY KEY (event_id)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>다음과 같이 샘플용 데이터를 추가하고 MySQL 접속을 종료한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO metabase_test_table VALUES (0, 1000, 1, <span class="string">"N"</span>, <span class="string">"2019-12-06T11:00:00Z"</span>, 100, 123);</span><br><span class="line">mysql&gt; INSERT INTO metabase_test_table VALUES (1, 1001, 2, <span class="string">"N"</span>, <span class="string">"2019-12-06T11:10:00Z"</span>, 100, 123);</span><br><span class="line">mysql&gt; INSERT INTO metabase_test_table VALUES (2, 1002, 3, <span class="string">"N"</span>, <span class="string">"2019-12-06T11:20:00Z"</span>, 100, 123);</span><br><span class="line">mysql&gt; INSERT INTO metabase_test_table VALUES (3, 1003, 3, <span class="string">"N"</span>, <span class="string">"2019-12-06T11:30:00Z"</span>, 100, 123);</span><br><span class="line">mysql&gt; INSERT INTO metabase_test_table VALUES (4, 1004, 12, <span class="string">"Y"</span>, <span class="string">"2019-12-06T11:40:00Z"</span>, 100, 123);</span><br><span class="line">mysql&gt; <span class="built_in">exit</span>;</span><br></pre></td></tr></table></figure>

<p>Metabase에 MySQL Database를 연동하기 위해서 host 주소가 필요한데, 다음과 같은 명령으로 MySQL 컨테이너의 컨테이너 IP를 확인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker inspect -f <span class="string">"&#123;&#123; .NetworkSettings.IPAddress &#125;&#125;"</span> mysql_test</span><br><span class="line">172.17.0.2</span><br></pre></td></tr></table></figure>

<p>다음과 같은 명령으로 Metabase를 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 3000:3000 --name local_metabase metabase/metabase:v0.32.4</span><br><span class="line">a3456fce21680e2fba932edc8cc395adb75d143513f8fe9b831e130b1bf3cfae</span><br></pre></td></tr></table></figure>

<p>웹 브라우저로 <a href="http://localhost:3000/" target="_blank" rel="noopener">http://localhost:3000/</a> 에 접속하여 초기 정보를 입력하고 Admin 계정을 생성한다.<br>메인 페이지에서 다음과 같은 순서로 <a href="http://localhost:3000/admin/database/create" target="_blank" rel="noopener">Database 추가 페이지</a>로 이동한다.</p>
<ul>
<li>메인 페이지 우측 상단 톱니모양 버튼(Setting) 클릭 &gt;&gt; Dropdown 메뉴중 <code>ADMIN</code> 클릭 &gt;&gt; 페이지 상단 메뉴중  <code>DATABASE</code> 클릭 &gt;&gt; 우측 상단 <code>ADD DATABASE</code> 클릭</li>
</ul>
<p>Database 추가 페이지에서 아래와 같은 MySQL에 관한 정보를 입력하여 Metabase에 MySQL Database를 등록한다.</p>
<ul>
<li>MySQL에 관한 정보<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td>Database type</td>
<td>MySQL</td>
</tr>
<tr>
<td>Name</td>
<td>metabase_test_db_mysql</td>
</tr>
<tr>
<td>Host</td>
<td>172.17.0.2</td>
</tr>
<tr>
<td>Port</td>
<td>3306</td>
</tr>
<tr>
<td>Database name</td>
<td>metabase_test_db</td>
</tr>
<tr>
<td>Database username</td>
<td>root</td>
</tr>
<tr>
<td>Database password</td>
<td>1234</td>
</tr>
</tbody></table>
</li>
</ul>
<p>Metabase에 등록된 MySQL Database에 정상적으로 접근하여 사용할수 있는지 확인하기 위해서 앞서 생성한 metabase_test_table 테이블을 조회하는 Question을 생성해본다.<br>다음과 같은 순서로 Metabase의  Question 생성 페이지로 이동한다.</p>
<ul>
<li>Metabase 메인 페이지 우측 상단 <code>ASK A QUESTION</code> 클릭 &gt;&gt; 우측 <code>NATIVE QUERY</code> 클릭</li>
</ul>
<p>좌측 상단 Database Select Box에서 “metabase_test_db_mysql”을 선택하고, 다음과 같은 쿼리문을 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from metabase_test_table;</span><br></pre></td></tr></table></figure>

<p>쿼리문을 실행하면 페이지 하단에서 다음과 같은 결과 Table을 확인할 수 있다.<br><a href="/post_attachment/Metabase-운영-관련-기초-테스트/MySQL_테이블_생성.png" target="_blank">테이블 확인 스크린샷</a></p>
<hr>
<h1 id="Metabase-메타데이터-마이그레이션-테스트-H2-→-MySQL"><a href="#Metabase-메타데이터-마이그레이션-테스트-H2-→-MySQL" class="headerlink" title="Metabase 메타데이터 마이그레이션 테스트 : H2 → MySQL"></a>Metabase 메타데이터 마이그레이션 테스트 : H2 → MySQL</h1><blockquote>
<p>이 테스트는 Metabase v0.32.4 - 마이그레이션 버그로 인해서 v0.32.5로 진행하였다. 다음은 관련 github 링크이다.</p>
<ul>
<li><a href="https://github.com/metabase/metabase/issues/9756" target="_blank" rel="noopener">https://github.com/metabase/metabase/issues/9756</a></li>
</ul>
<p>해당 링크의 에러 케이스는 Linux Bionic에서 발생한 케이스지만, 실제로 macOS에서 마이그레이션을 시도해본 결과 동일한 포인트에서 에러가 발생했다.<br>따라서 테스트는 v0.32.5에서 진행한다.</p>
</blockquote>
<p>이 테스트는 다음과 같은 Metabase 공식 문서를 참고하여 진행하였다.</p>
<ul>
<li><a href="https://www.metabase.com/docs/v0.32.5/operations-guide/running-metabase-on-docker.html" target="_blank" rel="noopener">v0.32.5 / Operations-Guide / Running Metabase on Docker : Migrating from H2 to Postgres as the Metabase application database</a></li>
</ul>
<p>공식 문서는 H2 → Postgre 마이그레이션 방법에 설명하고 있지만, 몇 가지 설정만 변경하면 H2 → MySQL 마이그레이션도 가능하다.<br>H2 → MySQL 마이그레이션을 하는 방법은 Metabase 실행시 Source(H2 Database)에 대한 정보와 Target(MySQL)에 대한 정보, load-from-h2 인자를 추가해주면 된다.<br>Metabase Migration 컨테이너를 실행하면 기존 H2에 저장된 메타 데이터를 불러와 MySQL에 저장하고 컨테이너는 중지 상태가 된다.<br>마이그레이션 확인을 위해서는 MySQL에 대한 정보를 인자로 추가하여 Metabase를 실행한다.</p>
<p>편의를 위해 다음과 같은 용어를 사용한다.</p>
<ul>
<li>Metabase H2 : Metabase의 메타데이터 저장소로 H2를 사용하는 방식의 Metabase Docker 컨테이너</li>
<li>Metabase Migration : H2로 저장된 Metabase의 메타데이터를 MySQL에 저장하는 처리를 위한 Metabase Docker 컨테이너 (Source(H2 Database)에 대한 정보, Target(MySQL)에 대한 정보, load-from-h2 인자 를 사용하여 실행)</li>
<li>Metabase MySQL : Metabase의 메타데이터 저장소로 MySQL을 사용하는 방식의 Metabase Docker 컨테이너 (MySQL에 대한 접근 정보 인자를 사용하여 실행)</li>
<li>MySQL : Docker MySQL 컨테이너, Metabase 메타데이터 저장소로 사용할 MySQL 컨테이너.</li>
</ul>
<p>마이그레이션 테스트는 다음과 같이 진행한다.</p>
<ol>
<li>Metabase H2 실행하여 메타 데이터 저장하고 중지하기<ul>
<li>Metabase H2 실행</li>
<li>Metabase에 접속하여 Dashboard 만들기</li>
<li>Metabase H2 컨테이너 중지</li>
</ul>
</li>
<li>메타데이터 마이그레이션 진행<ul>
<li>MySQL 실행 및 데이터 베이스 생성</li>
<li>Source(H2 Database)에 대한 정보, Target(MySQL)에 대한 정보, load-from-h2 옵션 추가하여 Metabase Migration 실행</li>
</ul>
</li>
<li>마이그레이션된 메타데이터 확인<ul>
<li>MySQL에 대한 정보를 옵션으로 추가하여 Metabase MySQL 실행</li>
<li>Metabase에 접속하여 Dashboard 존재여부 확인</li>
</ul>
</li>
</ol>
<h2 id="Metabase-H2-실행하여-메타-데이터-저장하고-중지하기"><a href="#Metabase-H2-실행하여-메타-데이터-저장하고-중지하기" class="headerlink" title="Metabase H2 실행하여 메타 데이터 저장하고 중지하기"></a>Metabase H2 실행하여 메타 데이터 저장하고 중지하기</h2><p>Metabase 메타 데이터가 Host OS에 매핑되도록 다음과 같이 Metabase H2를 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 3000:3000 -v /tmp/metabase.db:/metabase.db -e <span class="string">"MB_DB_FILE=/metabase.db"</span> --name h2_metabase metabase/metabase:v0.32.5</span><br><span class="line">22a4d9b85c1daa9ee481274537cc4ed4d47e75ed5351d53fe858e4a4c26e0bbf</span><br></pre></td></tr></table></figure>

<p>이 테스트에서는 Metabase에서 기본적으로 제공해주는 Sample Dataset으로 Dashboard를 만든다.<br>웹 브라우저로 Metabase <a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a> 에 접속하여 초기정보(Admin 계정 생성)를 입력하고 Metabase 메인페이지로 이동한다.</p>
<p>Sample Dataset - PRODUCT를 활용하여 다음과 같은 Dashboard를 만든다. Dashboard를 생성방법은 문서 목적에 부합되지 않아 별도로 설명하지 않는다.</p>
<ul>
<li><a href="/post_attachment/Metabase-운영-관련-기초-테스트/Migration_대시보드.png" target="_blank">대시보드 생성 스크린샷</a></li>
</ul>
<p>다음과 같은 명령으로 Metabase H2 컨테이너를 중지한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker stop h2_metabase</span><br><span class="line">h2_metabase</span><br></pre></td></tr></table></figure>

<h2 id="메타데이터-마이그레이션-진행"><a href="#메타데이터-마이그레이션-진행" class="headerlink" title="메타데이터 마이그레이션 진행"></a>메타데이터 마이그레이션 진행</h2><p>다음과 같은 명령으로 Metabase의 메타데이터를 저장할 MySQL 컨테이너를 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=1234 --name mysql_for_metabase_metadata mysql:5.6</span><br><span class="line">bdcbba95ca008415fa6b53e3aedc448a51d6bacdf0c765c372381d1efc54e1f9</span><br></pre></td></tr></table></figure>


<p>다음과 같은 명령으로 MySQL에 직접 접속하여 Metabase 메타데이터를 저장할 Database를 생성한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">exec</span> -it mysql_for_metabase_metadata mysql -h 127.0.0.1 -u root -p</span><br><span class="line">Enter password : 1234</span><br><span class="line">mysql&gt; CREATE DATABASE metabase_metadata;</span><br><span class="line">mysql&gt; <span class="built_in">exit</span>;</span><br></pre></td></tr></table></figure>

<p>Metabase MySQL 컨테이너를 실행하기에 앞서 다음과 같은 명령으로 Target(MySQL)에 대한 정보 - MySQL 컨테이너 IP를 확인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker inspect -f <span class="string">"&#123;&#123; .NetworkSettings.IPAddress &#125;&#125;"</span> mysql_for_metabase_metadata</span><br><span class="line">172.17.0.2</span><br></pre></td></tr></table></figure>


<p>다음과 같이 Source(H2 Database)에 대한 정보, Target(MySQL)에 대한 정보, load-from-h2 인자를 추가하여 Metabase Migration을 실행한다. Metabase H2 컨테이너와 구분하기 위하여 포트번호를 3001로 변경하였다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 3001:3000\</span><br><span class="line">    -v /tmp/metabase.db:/metabase.db \</span><br><span class="line">    -e <span class="string">"MB_DB_FILE=/metabase.db"</span> \</span><br><span class="line">    -e <span class="string">"MB_DB_TYPE=mysql"</span> \</span><br><span class="line">    -e <span class="string">"MB_DB_DBNAME=metabase_metadata"</span> \</span><br><span class="line">    -e <span class="string">"MB_DB_PORT=3306"</span> \</span><br><span class="line">    -e <span class="string">"MB_DB_USER=root"</span> \</span><br><span class="line">    -e <span class="string">"MB_DB_PASS=1234"</span> \</span><br><span class="line">    -e <span class="string">"MB_DB_HOST=172.17.0.2"</span> \</span><br><span class="line">--name migration_metabase metabase/metabase:v0.32.5 load-from-h2</span><br><span class="line">b42028059268ca3381c5f288f1053e2d667b595837d3a67afe5161b2387b1baa</span><br></pre></td></tr></table></figure>

<p>Metabase migration은 H2 → MySQL 마이그레이션 완료되면 컨테이너가 중지 상태가 된다.</p>
<h2 id="마이그레이션된-메타데이터-확인"><a href="#마이그레이션된-메타데이터-확인" class="headerlink" title="마이그레이션된 메타데이터 확인"></a>마이그레이션된 메타데이터 확인</h2><p>메타데이터를 저장한 MySQL에 대한 접근 정보를 인자로 추가하여 Metabase를 실행한다.<br>Metabase에 접속하여 기존에 생성한 Dashborad 존재 유무에 따라 마이그레이션 성공 유무를 판단할 수 있다.</p>
<p>다음과 같은 명령으로 MySQL에 대한 정보를 인자로 추가하여 Metabase MySQL을 실행한다. 구분을 위해 3002번 포트를 사용한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 3002:3000\</span><br><span class="line">    -e <span class="string">"MB_DB_TYPE=mysql"</span> \</span><br><span class="line">    -e <span class="string">"MB_DB_DBNAME=metabase_metadata"</span> \</span><br><span class="line">    -e <span class="string">"MB_DB_PORT=3306"</span> \</span><br><span class="line">    -e <span class="string">"MB_DB_USER=root"</span> \</span><br><span class="line">    -e <span class="string">"MB_DB_PASS=1234"</span> \</span><br><span class="line">    -e <span class="string">"MB_DB_HOST=172.17.0.2"</span> \</span><br><span class="line">--name mysql_metabase metabase/metabase:v0.32.5</span><br><span class="line">cb2cbadaf590634d072638c89717062ae7fc7efaca219f95ef0c9c6b84225074</span><br></pre></td></tr></table></figure>

<p><a href="http://localhost:3002/" target="_blank" rel="noopener">http://localhost:3002/</a> 에 접속하여 기존에 만든 Dashboard가 존재하는지 확인한다.<br>테스트에서는 기존에 만들었던 Dashboard가 존재하는 것을 확인하였다. 즉 메타데이터 마이그레이션이 정상적으로 처리되었다고 볼 수 있다</p>
<hr>
<h1 id="버전-업그레이드-MySQL에-Metabase-메타데이터를-저장하는-방식에서-v0-29-3-→-v0-32-4-버전-업그레이드"><a href="#버전-업그레이드-MySQL에-Metabase-메타데이터를-저장하는-방식에서-v0-29-3-→-v0-32-4-버전-업그레이드" class="headerlink" title="버전 업그레이드 : MySQL에 Metabase 메타데이터를 저장하는 방식에서 v0.29.3 → v0.32.4 버전 업그레이드"></a>버전 업그레이드 : MySQL에 Metabase 메타데이터를 저장하는 방식에서 v0.29.3 → v0.32.4 버전 업그레이드</h1><p>이 테스트는 메타데이터를 MySQL에 저장하는 Metabase의 버전 업그레이드(v0.29.3 → v0.32.4)에 대한 내용을 다룬다.</p>
<p>메타데이터 저장소를 MySQL로 설정한 Metabase v0.29.3을 실행한다.<br>Metabase에 접속하여 버전 확인하고 메타데이터 생성을 위하여 User 계정 생성과 Dashboard 생성한다.<br>메타데이터 생성(User 계정 생성, Dashborad 생성) 하는 이유는 상위 버전(v0.32.4)에서 하위 버전(v0.29.3)이 호환 되는지 확인하기 위해서이다.<br>Metabase v0.29.3을 중지하고 메타데이터 저장소로 MySQL로 설정하여 Metabase v0.32.4를 실행한다.</p>
<p>테스트는 다음과 같은 순서로 진행한다.</p>
<ol>
<li>MySQL v5.6 실행 및 메타데이터를 저장할 Database 생성</li>
<li>MySQL을 메타데이터 저장소로 사용하는 설정으로 Metabase v0.29.3 실행</li>
<li>Metabase에 접속하여 Metabase 버전(v0.29.3) 확인 및  User 계정, Dashboard 생성</li>
<li>Metabase v0.29.3 중지</li>
<li>MySQL을 메타데이터 저장소로 사용하는 설정으로 Metabase v0.32.4 실행</li>
<li>Metabase에 접속하여 Metabase 버전 확인 - v0.32.4, v0.29.3에서 생성한 User 계정 존재유무, Dashboard 존재유무 확인</li>
</ol>
<h2 id="MySQL-v5-6-실행-및-메타-데이터를-저장할-Database-생성"><a href="#MySQL-v5-6-실행-및-메타-데이터를-저장할-Database-생성" class="headerlink" title="MySQL v5.6 실행 및 메타 데이터를 저장할 Database 생성"></a>MySQL v5.6 실행 및 메타 데이터를 저장할 Database 생성</h2><p>다음과 같은 명령으로 MySQL v5.6을 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=1234 --name mysql_metabase_metadata mysql:5.6</span><br><span class="line">43a31f157ef087fde741b49358d9d793508dfa94eb92c61ff2cc1293fdc172eb</span><br></pre></td></tr></table></figure>

<p>MySQL v5.6에 접속하여 메타데이터를 저장할 Database(metbase_metadata)를 생성한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">exec</span> -it mysql_metabase_metadata mysql -h 127.0.0.1 -u root -p</span><br><span class="line">Enter password : 1234</span><br><span class="line">mysql&gt; CREATE DATABASE metabase_metadata;</span><br><span class="line">mysql&gt; <span class="built_in">exit</span>;</span><br></pre></td></tr></table></figure>

<h2 id="MySQL을-메타데이터-저장소로-사용하는-설정으로-Metabase-v0-29-3-실행"><a href="#MySQL을-메타데이터-저장소로-사용하는-설정으로-Metabase-v0-29-3-실행" class="headerlink" title="MySQL을 메타데이터 저장소로 사용하는 설정으로 Metabase v0.29.3 실행"></a>MySQL을 메타데이터 저장소로 사용하는 설정으로 Metabase v0.29.3 실행</h2><p>MySQL의 Host 주소를 확인하기 위해서 다음과 같은 명령으로 컨테이너 IP를 확인한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker inspect -f <span class="string">"&#123;&#123; .NetworkSettings.IPAddress &#125;&#125;"</span> mysql_metabase_metadata</span><br><span class="line">172.17.0.2</span><br></pre></td></tr></table></figure>

<p>다음과 같이 메타데이터를 저장할 MySQL에 대한 정보를 인자로 추가하여 Metabase v0.29.3을 실행한다. MySQL에 대한 정보는 URI 형태의 인자로 추가 하였다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 3000:3000 --name metabase_v293 -e <span class="string">"MB_DB_CONNECTION_URI=mysql://172.17.0.2:3306/metabase_metadata?user=root&amp;password=1234"</span> metabase/metabase:v0.29.3</span><br><span class="line">1f123b30d49a027a748598aa693c1e52c50e9cc38bcc36cef6218db5a2663987</span><br></pre></td></tr></table></figure>

<h2 id="Metabase에-접속하여-Metabase-버전-v0-29-3-확인-및-일반-User계정-Dashboard-생성"><a href="#Metabase에-접속하여-Metabase-버전-v0-29-3-확인-및-일반-User계정-Dashboard-생성" class="headerlink" title="Metabase에 접속하여 Metabase 버전(v0.29.3)  확인 및 일반 User계정, Dashboard 생성"></a>Metabase에 접속하여 Metabase 버전(v0.29.3)  확인 및 일반 User계정, Dashboard 생성</h2><p><a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a> 에 접속하여 초기 정보를 입력하고 Admin 계정을 생성한다.<br>다음과 같은 순서로 Metabase 버전(v0.29.3)을 확인한다.</p>
<ul>
<li>메인 페이지 우측 상단 “Admin 계정 원형 버튼” 클릭 &gt;&gt; Dropdown 메뉴중 <code>ABOUT METABASE</code> 클릭</li>
<li><a href="/post_attachment/Metabase-운영-관련-기초-테스트/Metabase_v0_29_3_버전_확인.png" target="_blank">Metabase 버전 v0.29.3 확인 스크린샷</a></li>
</ul>
<p>User 계정 생성과 관련된 자세한 설명은 문서목적에 부합하지 않아서 생략한다.<br>User 계정 목록을 확인하기 위해 다음과 같은 순서로 <a href="http://localhost:3000/admin/people" target="_blank" rel="noopener">User 계정 목록 페이지</a>로 이동한다.</p>
<ul>
<li>메인 페이지 우측 상단 “Admin 계정 원형 버튼” 클릭 &gt;&gt; Dropdown 메뉴중 <code>ADMIN PANEL</code> 클릭 &gt;&gt; 상단 메뉴중 <code>ADMIN PANEL</code> 클릭</li>
</ul>
<p>다음은 테스트 진행하며 User 계정 목록을 확인하는 Metabase 페이지 스크린 샷이다.</p>
<ul>
<li><a href="/post_attachment/Metabase-운영-관련-기초-테스트/Metabase_v0_29_3_User_계정_확인.png" target="_blank">User 계정 목록을 확인하는 Metabase 페이지 스크린 샷</a></li>
</ul>
<p>테스트에서는 Sample Dataset - Reviews를 사용하여 Dashboard를 생성하였다. Dashboard 생성에 관한 내용은 별도의 설명을 생략한다.</p>
<ul>
<li><a href="/post_attachment/Metabase-운영-관련-기초-테스트/Make_Dashboard.png" target="_blank">Sample Dataset - Reviews를 사용하여 생성한 Dashboard 스크린샷</a></li>
</ul>
<h2 id="Metabase-v0-29-3-중지"><a href="#Metabase-v0-29-3-중지" class="headerlink" title="Metabase v0.29.3 중지"></a>Metabase v0.29.3 중지</h2><p>업그레이드를 위해서 실행중인 Metabase v0.29.3을 중지한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker stop metabase_v293</span><br><span class="line">metabase_v293</span><br></pre></td></tr></table></figure>

<h2 id="MySQL을-메타데이터-저장소로-사용하는-설정으로-Metabase-v0-32-4-실행"><a href="#MySQL을-메타데이터-저장소로-사용하는-설정으로-Metabase-v0-32-4-실행" class="headerlink" title="MySQL을 메타데이터 저장소로 사용하는 설정으로 Metabase v0.32.4 실행"></a>MySQL을 메타데이터 저장소로 사용하는 설정으로 Metabase v0.32.4 실행</h2><p>다음과 같이 메타데이터를 저장할 MySQL에 대한 정보를 인자로 추가하여 Metabase v0.32.4를 실행한다. 구분을 위하여 3001 포트를 사용한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 3001:3000 --name metabase_v324 -e <span class="string">"MB_DB_CONNECTION_URI=mysql://172.17.0.2:3306/metabase_metadata?user=root&amp;password=1234"</span> metabase/metabase:v0.32.4</span><br><span class="line">9a5ae4de2f87c3ed0418c0c9a35c6da507c1bf9b4dde1ed90e594296e34f86d7</span><br></pre></td></tr></table></figure>

<h2 id="Metabase에-접속하여-Metabase-버전-확인-v0-32-4-v0-29-3에서-생성한-일반-User계정-존재유무-Dashboard-존재유무-확인"><a href="#Metabase에-접속하여-Metabase-버전-확인-v0-32-4-v0-29-3에서-생성한-일반-User계정-존재유무-Dashboard-존재유무-확인" class="headerlink" title="Metabase에 접속하여 Metabase 버전 확인 - v0.32.4, v0.29.3에서 생성한 일반 User계정 존재유무, Dashboard 존재유무 확인"></a>Metabase에 접속하여 Metabase 버전 확인 - v0.32.4, v0.29.3에서 생성한 일반 User계정 존재유무, Dashboard 존재유무 확인</h2><p><a href="http://localhost:3001" target="_blank" rel="noopener">http://localhost:3001</a> 에 접속하여 Admin 계정에 로그인 한다.</p>
<p>다음과 같은 순서로 업그레이드한 Metabase 버전(v0.32.4)을 확인한다.</p>
<ul>
<li>메인페이지 우측 상단 “톱니바퀴 버튼(Settings)” 클릭 &gt;&gt; Dropdown 메뉴중 <code>ABOUT METABASE</code> 클릭</li>
<li><a href="/post_attachment/Metabase-운영-관련-기초-테스트/Metabase_v0_32_4_버전_확인.png" target="_blank">Metabase 버전 v0.32.4 확인 스크린샷</a></li>
</ul>
<p>다음과 같은 순서로 <a href="http://localhost:3001/admin/people" target="_blank" rel="noopener">User계정 목록 페이지</a>로 이동할 수 있으며 해당 페이지에서 User 계정 목록을 확인할 수 있다.</p>
<ul>
<li>메인페이지 우측 상단 “톱니바퀴 버튼(Settings)” 클릭 &gt;&gt; Dropdown 메뉴중 <code>ADMIN</code> 클릭 &gt;&gt; 페이지 상단 메뉴중 <code>PEOPLE</code> 클릭 </li>
</ul>
<p>별도로 Collection을 생성하여 Dashboard를 만들지 않았다면 Our analytics에서 v0.29.3에서 생성한 Dashboard를 확인할 수 있다.<br>Our analytics는 Metabase 메인페이지 상단의 START HERE에서 링크로 연결되어 있다.<br>테스트에서는 v0.29.3에서 생성했던 User 계정 목록과 Dashboard도 존재하는 것을 확인했다.</p>
<hr>
<h1 id="MySQL-8-x-버전-사용시-Metabase와-연동-오류-원인과-해결방법"><a href="#MySQL-8-x-버전-사용시-Metabase와-연동-오류-원인과-해결방법" class="headerlink" title="MySQL 8.x 버전 사용시 Metabase와 연동 오류 원인과 해결방법"></a>MySQL 8.x 버전 사용시 Metabase와 연동 오류 원인과 해결방법</h1><p>MySQL 8.0이상의 버전을 사용 할 경우 Metabase와 연동 오류가 발생한다.<br>오류 메시지는 다음과 같다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.sql.SQLException: Unable to load authentication plugin <span class="string">'caching_sha2_password'</span>.</span><br></pre></td></tr></table></figure>

<p>발생하는 원인은 다음과 같다. </p>
<ul>
<li>MySQL 8.0 이상 버전은 MySQL 서버의 기본 인증 플러그인을 mysql_native_password에서 caching_sha2_password로 변경했다.</li>
<li>Metabase(v.0.32)는 MariaDB Connector/J를 사용하고 있으며 MariaDB 공식 사이트를 보면 현재(2019.12.23)기준으로 caching_sha2_password를 지원하지 않는다고 명시되어 있다.</li>
</ul>
<p>따라서, MySQL에 접속하는 User의 인증 방식을 mysql_native_password으로 변경해야 되며 방법은 다음과 같다. 아래의 방법은 root 유저를 기준으로 작성되었으며 각 각 상황에 맞게 변경한다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER root@‘%’ IDENTIFIED WITH mysql_native_password BY ‘1234’;</span><br></pre></td></tr></table></figure>

<p>참고 링크는 다음과 같다.</p>
<ul>
<li><a href="https://github.com/metabase/metabase/issues/9572" target="_blank" rel="noopener">https://github.com/metabase/metabase/issues/9572</a></li>
</ul>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Docker/" rel="tag">Docker</a> <a class="tag tag--primary tag--small t-link" href="/tags/Metabase/" rel="tag">Metabase</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/01/03/Elasticsearch-Query-DSL-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5%EC%A0%95%EB%A6%AC-0/"
                    data-tooltip="Elasticsearch query DSL 기초 학습정리"
                    aria-label="PREVIOUS: Elasticsearch query DSL 기초 학습정리"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/11/27/Kinesis-Data-Stream-%ED%8C%8C%ED%8B%B0%EC%85%98%ED%82%A4-%EC%84%A0%ED%83%9D%EA%B3%BC-Shard-%EB%B6%84%EC%82%B0-%EB%8F%99%EC%9E%91-%EC%BC%80%EC%9D%B4%EC%8A%A4%EB%B3%84-%ED%85%8C%EC%8A%A4%ED%8A%B8/"
                    data-tooltip="Kinesis Data Stream - 파티션키 선택과 Shard 분산 동작 케이스별 테스트"
                    aria-label="NEXT: Kinesis Data Stream - 파티션키 선택과 Shard 분산 동작 케이스별 테스트"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://usehun0625.github.io/2019/12/23/Metabase-%EC%9A%B4%EC%98%81-%EA%B4%80%EB%A0%A8-%EA%B8%B0%EC%B4%88-%ED%85%8C%EC%8A%A4%ED%8A%B8/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=http://usehun0625.github.io/2019/12/23/Metabase-%EC%9A%B4%EC%98%81-%EA%B4%80%EB%A0%A8-%EA%B8%B0%EC%B4%88-%ED%85%8C%EC%8A%A4%ED%8A%B8/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=http://usehun0625.github.io/2019/12/23/Metabase-%EC%9A%B4%EC%98%81-%EA%B4%80%EB%A0%A8-%EA%B8%B0%EC%B4%88-%ED%85%8C%EC%8A%A4%ED%8A%B8/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="Table of Contents">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Kevin. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/01/03/Elasticsearch-Query-DSL-%EA%B8%B0%EC%B4%88-%ED%95%99%EC%8A%B5%EC%A0%95%EB%A6%AC-0/"
                    data-tooltip="Elasticsearch query DSL 기초 학습정리"
                    aria-label="PREVIOUS: Elasticsearch query DSL 기초 학습정리"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/11/27/Kinesis-Data-Stream-%ED%8C%8C%ED%8B%B0%EC%85%98%ED%82%A4-%EC%84%A0%ED%83%9D%EA%B3%BC-Shard-%EB%B6%84%EC%82%B0-%EB%8F%99%EC%9E%91-%EC%BC%80%EC%9D%B4%EC%8A%A4%EB%B3%84-%ED%85%8C%EC%8A%A4%ED%8A%B8/"
                    data-tooltip="Kinesis Data Stream - 파티션키 선택과 Shard 분산 동작 케이스별 테스트"
                    aria-label="NEXT: Kinesis Data Stream - 파티션키 선택과 Shard 분산 동작 케이스별 테스트"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://usehun0625.github.io/2019/12/23/Metabase-%EC%9A%B4%EC%98%81-%EA%B4%80%EB%A0%A8-%EA%B8%B0%EC%B4%88-%ED%85%8C%EC%8A%A4%ED%8A%B8/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=http://usehun0625.github.io/2019/12/23/Metabase-%EC%9A%B4%EC%98%81-%EA%B4%80%EB%A0%A8-%EA%B8%B0%EC%B4%88-%ED%85%8C%EC%8A%A4%ED%8A%B8/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=http://usehun0625.github.io/2019/12/23/Metabase-%EC%9A%B4%EC%98%81-%EA%B4%80%EB%A0%A8-%EA%B8%B0%EC%B4%88-%ED%85%8C%EC%8A%A4%ED%8A%B8/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="Table of Contents">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=http://usehun0625.github.io/2019/12/23/Metabase-%EC%9A%B4%EC%98%81-%EA%B4%80%EB%A0%A8-%EA%B8%B0%EC%B4%88-%ED%85%8C%EC%8A%A4%ED%8A%B8/"
                        aria-label="Share on Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=http://usehun0625.github.io/2019/12/23/Metabase-%EC%9A%B4%EC%98%81-%EA%B4%80%EB%A0%A8-%EA%B8%B0%EC%B4%88-%ED%85%8C%EC%8A%A4%ED%8A%B8/"
                        aria-label="Share on Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=http://usehun0625.github.io/2019/12/23/Metabase-%EC%9A%B4%EC%98%81-%EA%B4%80%EB%A0%A8-%EA%B8%B0%EC%B4%88-%ED%85%8C%EC%8A%A4%ED%8A%B8/"
                        aria-label="Share on Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/beer.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Kevin</h4>
        
            <div id="about-card-bio"><p>Kevin, 이용훈<br>어릴 때부터 코딩에 흥미를 가지고 살아왔습니다. 새로운 기술도 열정적으로 받아들이며 더 좋은 개발을 위하여 학습하고 경험하고 노력하고 있습니다.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Developer, DE</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                서울 / 대한민국
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/curtain.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'http://usehun0625.github.io/2019/12/23/Metabase-%EC%9A%B4%EC%98%81-%EA%B4%80%EB%A0%A8-%EA%B8%B0%EC%B4%88-%ED%85%8C%EC%8A%A4%ED%8A%B8/';
              
            this.page.identifier = '2019/12/23/Metabase-운영-관련-기초-테스트/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'usehun0625';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    




    </body>
</html>
